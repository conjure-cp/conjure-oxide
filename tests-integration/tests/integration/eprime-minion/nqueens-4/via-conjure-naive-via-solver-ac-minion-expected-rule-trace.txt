Model before rewriting:

find majorDiagonal: matrix indexed by [[int(0..3)]] of int(0..6)
find minorDiagonal: matrix indexed by [[int(0..3)]] of int(-3..3)
find row: matrix indexed by [[int(0..7)]] of int(0..7)

such that

and([ and([(majorDiagonal[queen] = sum([queen,row[queen];int(1..2)])),(minorDiagonal[queen] = (queen - row[queen]));int(1..2)]) | queen : int(0..3) ]),
allDiff(row),
allDiff(majorDiagonal),
allDiff(minorDiagonal)

--

and([ and([(majorDiagonal#matrix_to_atom[queen] = sum([queen,row#matrix_to_atom[queen];int(1..2)])),(minorDiagonal#matrix_to_atom[queen] = (queen - row#matrix_to_atom[queen]));int(1..2)]) | queen : int(0..3) ]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
and([ and([(majorDiagonal#matrix_to_atom[queen] = sum([queen,row#matrix_to_atom[queen];int(1..2)])),(minorDiagonal#matrix_to_atom[queen] = (queen - row#matrix_to_atom[queen]));int(1..2)]) | queen : int(0..3) ]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 
new variables:
  find majorDiagonal#matrix_to_atom_0: int(0..6)
  find majorDiagonal#matrix_to_atom_1: int(0..6)
  find majorDiagonal#matrix_to_atom_2: int(0..6)
  find majorDiagonal#matrix_to_atom_3: int(0..6)
  find minorDiagonal#matrix_to_atom_0: int(-3..3)
  find minorDiagonal#matrix_to_atom_1: int(-3..3)
  find minorDiagonal#matrix_to_atom_2: int(-3..3)
  find minorDiagonal#matrix_to_atom_3: int(-3..3)
  find row#matrix_to_atom_0: int(0..7)
  find row#matrix_to_atom_1: int(0..7)
  find row#matrix_to_atom_2: int(0..7)
  find row#matrix_to_atom_3: int(0..7)
  find row#matrix_to_atom_4: int(0..7)
  find row#matrix_to_atom_5: int(0..7)
  find row#matrix_to_atom_6: int(0..7)
  find row#matrix_to_atom_7: int(0..7)
--

Model before rewriting:

find queen: int(0..3)
find __0: matrix indexed by [[int(0..3)]] of int(0..6)
find __1: matrix indexed by [[int(0..7)]] of int(0..7)
find __2: matrix indexed by [[int(0..3)]] of int(-3..3)

such that

(true != and([(__0[queen] = sum([queen,__1[queen];int(1..2)])),(__2[queen] = (queen - __1[queen]));int(1..2)]))

--

(queen - __1[queen]), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([queen,-(__1[queen]);int(1..)]) 

--

(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])) 
new variables:
  find __0#matrix_to_atom_0: int(0..6)
  find __0#matrix_to_atom_1: int(0..6)
  find __0#matrix_to_atom_2: int(0..6)
  find __0#matrix_to_atom_3: int(0..6)
  find __1#matrix_to_atom_0: int(0..7)
  find __1#matrix_to_atom_1: int(0..7)
  find __1#matrix_to_atom_2: int(0..7)
  find __1#matrix_to_atom_3: int(0..7)
  find __1#matrix_to_atom_4: int(0..7)
  find __1#matrix_to_atom_5: int(0..7)
  find __1#matrix_to_atom_6: int(0..7)
  find __1#matrix_to_atom_7: int(0..7)
  find __2#matrix_to_atom_0: int(-3..3)
  find __2#matrix_to_atom_1: int(-3..3)
  find __2#matrix_to_atom_2: int(-3..3)
  find __2#matrix_to_atom_3: int(-3..3)
--

__0#matrix_to_atom[queen], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..3));int(1..)])} 

--

(true != and([({__0#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..3));int(1..)])} = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])) 

--

__1#matrix_to_atom[queen], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__1#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..7));int(1..)])} 

--

(true != and([(__0#matrix_to_atom[queen] = sum([queen,{__1#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..7));int(1..)])};int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])) 

--

__2#matrix_to_atom[queen], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__2#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..3));int(1..)])} 

--

(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),({__2#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..3));int(1..)])} = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])) 

--

__1#matrix_to_atom[queen], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__1#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..7));int(1..)])} 

--

(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-({__1#matrix_to_atom[queen] @ and([__inDomain(queen,int(0..7));int(1..)])});int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])) 

--

(true != and([(__0#matrix_to_atom[queen] = sum([queen,__1#matrix_to_atom[queen];int(1..2)])),(__2#matrix_to_atom[queen] = sum([queen,-(__1#matrix_to_atom[queen]);int(1..)]));int(1..2)])), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])) 

--

(queen - -1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([queen,-(-1);int(1..)]) 

--

(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,-(-1);int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])) 

--

(queen - -1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([queen,-(-1);int(1..)]) 

--

(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,-(-1);int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][(queen - -1)] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])) 

--

(queen - -1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([queen,-(-1);int(1..)]) 

--

(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,-(-1);int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][(queen - -1)]);int(1..)]));int(1..2)])) 

--

(queen - -1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([queen,-(-1);int(1..)]) 

--

(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,-(-1);int(1..)])]);int(1..)]));int(1..2)])), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)])) 

--

(true != and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)])), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __3) 
new variables:
  find __3: bool
new constraints:
  __3 =aux and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)])
--

__3 =aux and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3) 

--

[__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])], 
   ~~> flatten_generic ([("Minion", 4200)]) 
[__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] 
new variables:
  find __4: int(1..4)
new constraints:
  __4 =aux sum([queen,1;int(1..)])
--

__4 =aux sum([queen,1;int(1..)]), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([1, queen], __4),SumGeq([1, queen], __4);int(1..)]) 

--

(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
and([SumLeq([1, queen], __4),SumGeq([1, queen], __4);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4) 

--

[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])], 
   ~~> flatten_generic ([("Minion", 4200)]) 
[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5] 
new variables:
  find __5: int(1..4)
new constraints:
  __5 =aux sum([queen,1;int(1..)])
--

__5 =aux sum([queen,1;int(1..)]), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([1, queen], __5),SumGeq([1, queen], __5);int(1..)]) 

--

(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
and([SumLeq([1, queen], __5),SumGeq([1, queen], __5);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5) 

--

[__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][sum([queen,1;int(1..)])], 
   ~~> flatten_generic ([("Minion", 4200)]) 
[__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] 
new variables:
  find __6: int(1..4)
new constraints:
  __6 =aux sum([queen,1;int(1..)])
--

__6 =aux sum([queen,1;int(1..)]), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([1, queen], __6),SumGeq([1, queen], __6);int(1..)]) 

--

(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5),
and([SumLeq([1, queen], __6),SumGeq([1, queen], __6);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5),
SumLeq([1, queen], __6),
SumGeq([1, queen], __6) 

--

[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][sum([queen,1;int(1..)])], 
   ~~> flatten_generic ([("Minion", 4200)]) 
[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7] 
new variables:
  find __7: int(1..4)
new constraints:
  __7 =aux sum([queen,1;int(1..)])
--

__7 =aux sum([queen,1;int(1..)]), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([1, queen], __7),SumGeq([1, queen], __7);int(1..)]) 

--

(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5),
SumLeq([1, queen], __6),
SumGeq([1, queen], __6),
and([SumLeq([1, queen], __7),SumGeq([1, queen], __7);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7]);int(1..)]));int(1..2)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5),
SumLeq([1, queen], __6),
SumGeq([1, queen], __6),
SumLeq([1, queen], __7),
SumGeq([1, queen], __7) 

--

and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7]);int(1..)]));int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7]);int(1..)]));int(1..)]) 

--

sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..)]) 

--

Final model:

find queen: int(0..3)
find __0: matrix indexed by [[int(0..3)]] of int(0..6)
find __1: matrix indexed by [[int(0..7)]] of int(0..7)
find __2: matrix indexed by [[int(0..3)]] of int(-3..3)
find __3: bool
find __4: int(1..4)
find __5: int(1..4)
find __6: int(1..4)
find __7: int(1..4)
find __0#matrix_to_atom_0: int(0..6)
find __0#matrix_to_atom_1: int(0..6)
find __0#matrix_to_atom_2: int(0..6)
find __0#matrix_to_atom_3: int(0..6)
find __1#matrix_to_atom_0: int(0..7)
find __1#matrix_to_atom_1: int(0..7)
find __1#matrix_to_atom_2: int(0..7)
find __1#matrix_to_atom_3: int(0..7)
find __1#matrix_to_atom_4: int(0..7)
find __1#matrix_to_atom_5: int(0..7)
find __1#matrix_to_atom_6: int(0..7)
find __1#matrix_to_atom_7: int(0..7)
find __2#matrix_to_atom_0: int(-3..3)
find __2#matrix_to_atom_1: int(-3..3)
find __2#matrix_to_atom_2: int(-3..3)
find __2#matrix_to_atom_3: int(-3..3)

such that

(true != __3),
Reify(and([([__0#matrix_to_atom_0,__0#matrix_to_atom_1,__0#matrix_to_atom_2,__0#matrix_to_atom_3;int(1..)][__4] = sum([queen,[__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__5];int(1..)])),([__2#matrix_to_atom_0,__2#matrix_to_atom_1,__2#matrix_to_atom_2,__2#matrix_to_atom_3;int(1..)][__6] = sum([queen,-([__1#matrix_to_atom_0,__1#matrix_to_atom_1,__1#matrix_to_atom_2,__1#matrix_to_atom_3,__1#matrix_to_atom_4,__1#matrix_to_atom_5,__1#matrix_to_atom_6,__1#matrix_to_atom_7;int(1..)][__7]);int(1..)]));int(1..)]), __3),
SumLeq([1, queen], __4),
SumGeq([1, queen], __4),
SumLeq([1, queen], __5),
SumGeq([1, queen], __5),
SumLeq([1, queen], __6),
SumGeq([1, queen], __6),
SumLeq([1, queen], __7),
SumGeq([1, queen], __7)

Model before rewriting:

quantified queen: int(0..3)
find __0: matrix indexed by [[int(0..3)]] of int(0..6)
find __1: matrix indexed by [[int(0..7)]] of int(0..7)
find __2: matrix indexed by [[int(0..3)]] of int(-3..3)
find __3: bool
find __4: int(1..4)
find __5: int(1..4)
find __6: int(1..4)
find __7: int(1..4)
find __0#matrix_to_atom_0: int(0..6)
find __0#matrix_to_atom_1: int(0..6)
find __0#matrix_to_atom_2: int(0..6)
find __0#matrix_to_atom_3: int(0..6)
find __1#matrix_to_atom_0: int(0..7)
find __1#matrix_to_atom_1: int(0..7)
find __1#matrix_to_atom_2: int(0..7)
find __1#matrix_to_atom_3: int(0..7)
find __1#matrix_to_atom_4: int(0..7)
find __1#matrix_to_atom_5: int(0..7)
find __1#matrix_to_atom_6: int(0..7)
find __1#matrix_to_atom_7: int(0..7)
find __2#matrix_to_atom_0: int(-3..3)
find __2#matrix_to_atom_1: int(-3..3)
find __2#matrix_to_atom_2: int(-3..3)
find __2#matrix_to_atom_3: int(-3..3)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified queen: int(0..3)
find __0: matrix indexed by [[int(0..3)]] of int(0..6)
find __1: matrix indexed by [[int(0..7)]] of int(0..7)
find __2: matrix indexed by [[int(0..3)]] of int(-3..3)
find __3: bool
find __4: int(1..4)
find __5: int(1..4)
find __6: int(1..4)
find __7: int(1..4)
find __0#matrix_to_atom_0: int(0..6)
find __0#matrix_to_atom_1: int(0..6)
find __0#matrix_to_atom_2: int(0..6)
find __0#matrix_to_atom_3: int(0..6)
find __1#matrix_to_atom_0: int(0..7)
find __1#matrix_to_atom_1: int(0..7)
find __1#matrix_to_atom_2: int(0..7)
find __1#matrix_to_atom_3: int(0..7)
find __1#matrix_to_atom_4: int(0..7)
find __1#matrix_to_atom_5: int(0..7)
find __1#matrix_to_atom_6: int(0..7)
find __1#matrix_to_atom_7: int(0..7)
find __2#matrix_to_atom_0: int(-3..3)
find __2#matrix_to_atom_1: int(-3..3)
find __2#matrix_to_atom_2: int(-3..3)
find __2#matrix_to_atom_3: int(-3..3)

such that

true

[ and([(majorDiagonal#matrix_to_atom[queen] = sum([queen,row#matrix_to_atom[queen];int(1..2)])),(minorDiagonal#matrix_to_atom[queen] = (queen - row#matrix_to_atom[queen]));int(1..2)]) | queen : int(0..3) ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = (0 - row#matrix_to_atom[0]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = (1 - row#matrix_to_atom[1]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = (2 - row#matrix_to_atom[2]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = (3 - row#matrix_to_atom[3]));int(1..2)]);int(1..)] 

--

and([and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = (0 - row#matrix_to_atom[0]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = (1 - row#matrix_to_atom[1]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = (2 - row#matrix_to_atom[2]));int(1..2)]),and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = (3 - row#matrix_to_atom[3]));int(1..2)]);int(1..)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = (0 - row#matrix_to_atom[0]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = (1 - row#matrix_to_atom[1]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = (2 - row#matrix_to_atom[2]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = (3 - row#matrix_to_atom[3]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

(0 - row#matrix_to_atom[0]), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([0,-(row#matrix_to_atom[0]);int(1..)]) 

--

(1 - row#matrix_to_atom[1]), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([1,-(row#matrix_to_atom[1]);int(1..)]) 

--

(2 - row#matrix_to_atom[2]), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([2,-(row#matrix_to_atom[2]);int(1..)]) 

--

(3 - row#matrix_to_atom[3]), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([3,-(row#matrix_to_atom[3]);int(1..)]) 

--

majorDiagonal#matrix_to_atom[0], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{majorDiagonal#matrix_to_atom[0] @ and([__inDomain(0,int(0..3));int(1..)])} 

--

and([({majorDiagonal#matrix_to_atom[0] @ and([__inDomain(0,int(0..3));int(1..)])} = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[0], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[0] @ and([__inDomain(0,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,{row#matrix_to_atom[0] @ and([__inDomain(0,int(0..7));int(1..)])};int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

minorDiagonal#matrix_to_atom[0], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{minorDiagonal#matrix_to_atom[0] @ and([__inDomain(0,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),({minorDiagonal#matrix_to_atom[0] @ and([__inDomain(0,int(0..3));int(1..)])} = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[0], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[0] @ and([__inDomain(0,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-({row#matrix_to_atom[0] @ and([__inDomain(0,int(0..7));int(1..)])});int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

majorDiagonal#matrix_to_atom[1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{majorDiagonal#matrix_to_atom[1] @ and([__inDomain(1,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([({majorDiagonal#matrix_to_atom[1] @ and([__inDomain(1,int(0..3));int(1..)])} = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[1] @ and([__inDomain(1,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,{row#matrix_to_atom[1] @ and([__inDomain(1,int(0..7));int(1..)])};int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

minorDiagonal#matrix_to_atom[1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{minorDiagonal#matrix_to_atom[1] @ and([__inDomain(1,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),({minorDiagonal#matrix_to_atom[1] @ and([__inDomain(1,int(0..3));int(1..)])} = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[1] @ and([__inDomain(1,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-({row#matrix_to_atom[1] @ and([__inDomain(1,int(0..7));int(1..)])});int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

majorDiagonal#matrix_to_atom[2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{majorDiagonal#matrix_to_atom[2] @ and([__inDomain(2,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([({majorDiagonal#matrix_to_atom[2] @ and([__inDomain(2,int(0..3));int(1..)])} = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[2] @ and([__inDomain(2,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,{row#matrix_to_atom[2] @ and([__inDomain(2,int(0..7));int(1..)])};int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

minorDiagonal#matrix_to_atom[2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{minorDiagonal#matrix_to_atom[2] @ and([__inDomain(2,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),({minorDiagonal#matrix_to_atom[2] @ and([__inDomain(2,int(0..3));int(1..)])} = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[2] @ and([__inDomain(2,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-({row#matrix_to_atom[2] @ and([__inDomain(2,int(0..7));int(1..)])});int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

majorDiagonal#matrix_to_atom[3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{majorDiagonal#matrix_to_atom[3] @ and([__inDomain(3,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([({majorDiagonal#matrix_to_atom[3] @ and([__inDomain(3,int(0..3));int(1..)])} = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[3] @ and([__inDomain(3,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,{row#matrix_to_atom[3] @ and([__inDomain(3,int(0..7));int(1..)])};int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

minorDiagonal#matrix_to_atom[3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{minorDiagonal#matrix_to_atom[3] @ and([__inDomain(3,int(0..3));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),({minorDiagonal#matrix_to_atom[3] @ and([__inDomain(3,int(0..3));int(1..)])} = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

row#matrix_to_atom[3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{row#matrix_to_atom[3] @ and([__inDomain(3,int(0..7));int(1..)])} 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-({row#matrix_to_atom[3] @ and([__inDomain(3,int(0..7));int(1..)])});int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

and([(majorDiagonal#matrix_to_atom[0] = sum([0,row#matrix_to_atom[0];int(1..2)])),(minorDiagonal#matrix_to_atom[0] = sum([0,-(row#matrix_to_atom[0]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[1] = sum([1,row#matrix_to_atom[1];int(1..2)])),(minorDiagonal#matrix_to_atom[1] = sum([1,-(row#matrix_to_atom[1]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[2] = sum([2,row#matrix_to_atom[2];int(1..2)])),(minorDiagonal#matrix_to_atom[2] = sum([2,-(row#matrix_to_atom[2]);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom[3] = sum([3,row#matrix_to_atom[3];int(1..2)])),(minorDiagonal#matrix_to_atom[3] = sum([3,-(row#matrix_to_atom[3]);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),(minorDiagonal#matrix_to_atom_0 = sum([0,-(row#matrix_to_atom_0);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),(minorDiagonal#matrix_to_atom_1 = sum([1,-(row#matrix_to_atom_1);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),(minorDiagonal#matrix_to_atom_2 = sum([2,-(row#matrix_to_atom_2);int(1..)]));int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),(minorDiagonal#matrix_to_atom_3 = sum([3,-(row#matrix_to_atom_3);int(1..)]));int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

(minorDiagonal#matrix_to_atom_0 = sum([0,-(row#matrix_to_atom_0);int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..)]) 

--

and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),and([FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..)]);int(1..2)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..2)]) 

--

(minorDiagonal#matrix_to_atom_1 = sum([1,-(row#matrix_to_atom_1);int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..)]) 

--

and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),and([FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..)]);int(1..2)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]) 

--

(minorDiagonal#matrix_to_atom_2 = sum([2,-(row#matrix_to_atom_2);int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..)]) 

--

and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),and([FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..)]);int(1..2)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]) 

--

(minorDiagonal#matrix_to_atom_3 = sum([3,-(row#matrix_to_atom_3);int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..)]) 

--

and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),and([FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..)]);int(1..2)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]) 

--

and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..)]) 

--

and([(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0);int(1..)]),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..2)])),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

sum([0,row#matrix_to_atom_0;int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
sum([0,row#matrix_to_atom_0;int(1..)]) 

--

(majorDiagonal#matrix_to_atom_0 = sum([0,row#matrix_to_atom_0;int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0);int(1..)]) 

--

and([SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0);int(1..)]),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
and([(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1);int(1..)]),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..2)])),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

sum([1,row#matrix_to_atom_1;int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
sum([1,row#matrix_to_atom_1;int(1..)]) 

--

(majorDiagonal#matrix_to_atom_1 = sum([1,row#matrix_to_atom_1;int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
and([SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1);int(1..)]),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
and([(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2);int(1..)]),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..2)])),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

sum([2,row#matrix_to_atom_2;int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
sum([2,row#matrix_to_atom_2;int(1..)]) 

--

(majorDiagonal#matrix_to_atom_2 = sum([2,row#matrix_to_atom_2;int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
and([SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2);int(1..)]),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
and([(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3);int(1..)]),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..2)])),
FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

sum([3,row#matrix_to_atom_3;int(1..2)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
sum([3,row#matrix_to_atom_3;int(1..)]) 

--

(majorDiagonal#matrix_to_atom_3 = sum([3,row#matrix_to_atom_3;int(1..)])), 
   ~~> introduce_weighted_sumleq_sumgeq ([("Minion", 4600)]) 
and([SumLeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),SumGeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3);int(1..)]) 

--

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
and([SumLeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),SumGeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3);int(1..)]),
FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
SumLeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),
SumGeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),
FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
allDiff(row#matrix_to_atom),
allDiff(majorDiagonal#matrix_to_atom),
allDiff(minorDiagonal#matrix_to_atom) 

--

allDiff(row#matrix_to_atom), 
   ~~> matrix_ref_to_atom ([("Base", 2000)]) 
allDiff([row#matrix_to_atom_0,row#matrix_to_atom_1,row#matrix_to_atom_2,row#matrix_to_atom_3,row#matrix_to_atom_4,row#matrix_to_atom_5,row#matrix_to_atom_6,row#matrix_to_atom_7;int(1..)]) 

--

allDiff([row#matrix_to_atom_0,row#matrix_to_atom_1,row#matrix_to_atom_2,row#matrix_to_atom_3,row#matrix_to_atom_4,row#matrix_to_atom_5,row#matrix_to_atom_6,row#matrix_to_atom_7;int(1..)]), 
   ~~> introduce_flat_alldiff ([("Minion", 4200)]) 
__flat_alldiff([row#matrix_to_atom_0, row#matrix_to_atom_1, row#matrix_to_atom_2, row#matrix_to_atom_3, row#matrix_to_atom_4, row#matrix_to_atom_5, row#matrix_to_atom_6, row#matrix_to_atom_7]) 

--

allDiff(majorDiagonal#matrix_to_atom), 
   ~~> matrix_ref_to_atom ([("Base", 2000)]) 
allDiff([majorDiagonal#matrix_to_atom_0,majorDiagonal#matrix_to_atom_1,majorDiagonal#matrix_to_atom_2,majorDiagonal#matrix_to_atom_3;int(1..)]) 

--

allDiff([majorDiagonal#matrix_to_atom_0,majorDiagonal#matrix_to_atom_1,majorDiagonal#matrix_to_atom_2,majorDiagonal#matrix_to_atom_3;int(1..)]), 
   ~~> introduce_flat_alldiff ([("Minion", 4200)]) 
__flat_alldiff([majorDiagonal#matrix_to_atom_0, majorDiagonal#matrix_to_atom_1, majorDiagonal#matrix_to_atom_2, majorDiagonal#matrix_to_atom_3]) 

--

allDiff(minorDiagonal#matrix_to_atom), 
   ~~> matrix_ref_to_atom ([("Base", 2000)]) 
allDiff([minorDiagonal#matrix_to_atom_0,minorDiagonal#matrix_to_atom_1,minorDiagonal#matrix_to_atom_2,minorDiagonal#matrix_to_atom_3;int(1..)]) 

--

allDiff([minorDiagonal#matrix_to_atom_0,minorDiagonal#matrix_to_atom_1,minorDiagonal#matrix_to_atom_2,minorDiagonal#matrix_to_atom_3;int(1..)]), 
   ~~> introduce_flat_alldiff ([("Minion", 4200)]) 
__flat_alldiff([minorDiagonal#matrix_to_atom_0, minorDiagonal#matrix_to_atom_1, minorDiagonal#matrix_to_atom_2, minorDiagonal#matrix_to_atom_3]) 

--

Final model:

find majorDiagonal: matrix indexed by [[int(0..3)]] of int(0..6)
find minorDiagonal: matrix indexed by [[int(0..3)]] of int(-3..3)
find row: matrix indexed by [[int(0..7)]] of int(0..7)
find majorDiagonal#matrix_to_atom_0: int(0..6)
find majorDiagonal#matrix_to_atom_1: int(0..6)
find majorDiagonal#matrix_to_atom_2: int(0..6)
find majorDiagonal#matrix_to_atom_3: int(0..6)
find minorDiagonal#matrix_to_atom_0: int(-3..3)
find minorDiagonal#matrix_to_atom_1: int(-3..3)
find minorDiagonal#matrix_to_atom_2: int(-3..3)
find minorDiagonal#matrix_to_atom_3: int(-3..3)
find row#matrix_to_atom_0: int(0..7)
find row#matrix_to_atom_1: int(0..7)
find row#matrix_to_atom_2: int(0..7)
find row#matrix_to_atom_3: int(0..7)
find row#matrix_to_atom_4: int(0..7)
find row#matrix_to_atom_5: int(0..7)
find row#matrix_to_atom_6: int(0..7)
find row#matrix_to_atom_7: int(0..7)

such that

SumLeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
SumGeq([0, row#matrix_to_atom_0], majorDiagonal#matrix_to_atom_0),
FlatWeightedSumLeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
FlatWeightedSumGeq([1, -1],[0, row#matrix_to_atom_0],minorDiagonal#matrix_to_atom_0),
SumLeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
SumGeq([1, row#matrix_to_atom_1], majorDiagonal#matrix_to_atom_1),
FlatWeightedSumLeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
FlatWeightedSumGeq([1, -1],[1, row#matrix_to_atom_1],minorDiagonal#matrix_to_atom_1),
SumLeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
SumGeq([2, row#matrix_to_atom_2], majorDiagonal#matrix_to_atom_2),
FlatWeightedSumLeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
FlatWeightedSumGeq([1, -1],[2, row#matrix_to_atom_2],minorDiagonal#matrix_to_atom_2),
SumLeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),
SumGeq([3, row#matrix_to_atom_3], majorDiagonal#matrix_to_atom_3),
FlatWeightedSumLeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
FlatWeightedSumGeq([1, -1],[3, row#matrix_to_atom_3],minorDiagonal#matrix_to_atom_3),
__flat_alldiff([row#matrix_to_atom_0, row#matrix_to_atom_1, row#matrix_to_atom_2, row#matrix_to_atom_3, row#matrix_to_atom_4, row#matrix_to_atom_5, row#matrix_to_atom_6, row#matrix_to_atom_7]),
__flat_alldiff([majorDiagonal#matrix_to_atom_0, majorDiagonal#matrix_to_atom_1, majorDiagonal#matrix_to_atom_2, majorDiagonal#matrix_to_atom_3]),
__flat_alldiff([minorDiagonal#matrix_to_atom_0, minorDiagonal#matrix_to_atom_1, minorDiagonal#matrix_to_atom_2, minorDiagonal#matrix_to_atom_3])

