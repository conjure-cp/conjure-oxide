Model before rewriting:

find a: matrix indexed by [[int(1..3), int(1..2)]] of int(1..3)

such that

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1)

--

a[..,1], 
   ~~> slice_to_bubble ([("Bubble", 6000)]) 
{a[..,1] @ and([__inDomain(1,int(1..2));int(1..)])} 

--

allDiff({a[..,1] @ and([__inDomain(1,int(1..2));int(1..)])}),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[..,2], 
   ~~> slice_to_bubble ([("Bubble", 6000)]) 
{a[..,2] @ and([__inDomain(2,int(1..2));int(1..)])} 

--

allDiff(a[..,1]),
allDiff({a[..,2] @ and([__inDomain(2,int(1..2));int(1..)])}),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[1,..], 
   ~~> slice_to_bubble ([("Bubble", 6000)]) 
{a[1,..] @ and([__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff({a[1,..] @ and([__inDomain(1,int(1..3));int(1..)])}),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[2,..], 
   ~~> slice_to_bubble ([("Bubble", 6000)]) 
{a[2,..] @ and([__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff({a[2,..] @ and([__inDomain(2,int(1..3));int(1..)])}),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[3,..], 
   ~~> slice_to_bubble ([("Bubble", 6000)]) 
{a[3,..] @ and([__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff({a[3,..] @ and([__inDomain(3,int(1..3));int(1..)])}),
(a[1, 1] = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[1, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{a[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..2));int(1..)])} 

--

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
({a[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..2));int(1..)])} = 1),
(a[2, 2] = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[2, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{a[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..2));int(1..)])} 

--

allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
({a[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..2));int(1..)])} = 1), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(a[..,1]),
allDiff(a[..,2]),
allDiff(a[1,..]),
allDiff(a[2,..]),
allDiff(a[3,..]),
(a[1, 1] = 1),
(a[2, 2] = 1) 

--

a[..,1], 
   ~~> flatten_matrix_slice ([("Smt", 1000)]) 
[a[1, 1],a[2, 1],a[3, 1];int(1..)] 

--

a[..,2], 
   ~~> flatten_matrix_slice ([("Smt", 1000)]) 
[a[1, 2],a[2, 2],a[3, 2];int(1..)] 

--

a[1,..], 
   ~~> flatten_matrix_slice ([("Smt", 1000)]) 
[a[1, 1],a[1, 2];int(1..)] 

--

a[2,..], 
   ~~> flatten_matrix_slice ([("Smt", 1000)]) 
[a[2, 1],a[2, 2];int(1..)] 

--

a[3,..], 
   ~~> flatten_matrix_slice ([("Smt", 1000)]) 
[a[3, 1],a[3, 2];int(1..)] 

--

Final model:

find a: matrix indexed by [[int(1..3), int(1..2)]] of int(1..3)

such that

allDiff([a[1, 1],a[2, 1],a[3, 1];int(1..)]),
allDiff([a[1, 2],a[2, 2],a[3, 2];int(1..)]),
allDiff([a[1, 1],a[1, 2];int(1..)]),
allDiff([a[2, 1],a[2, 2];int(1..)]),
allDiff([a[3, 1],a[3, 2];int(1..)]),
(a[1, 1] = 1),
(a[2, 2] = 1)

