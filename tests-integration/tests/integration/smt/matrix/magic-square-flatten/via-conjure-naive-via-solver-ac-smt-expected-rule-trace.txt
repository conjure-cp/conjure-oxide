Model before rewriting:

letting Index be domain int(1..3)
letting Value be domain int(1..9)
letting n be 3
find s: int(1..24)
find square: matrix indexed by [[Index, Index]] of Value

such that

allDiff(flatten(square)),
and([ (sum([ square[r, c] | c : Index ]) = s) | r : Index ]),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s)

--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)

such that

(true != (sum([ __0[r, __1] | c : Index ]) = __2))

--

(true != (sum([ __0[r, __1] | c : Index ]) = __2)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __0[r, __1] | c : Index ]) = __2)) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index

such that

(0 != __0[__1, __1])

--

(0 != __0#matrix_to_atom[__1, __1]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __0#matrix_to_atom[__1, __1]) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

__0#matrix_to_atom[__1, __1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[__1, __1] @ and([__inDomain(__1,int(1..3)),__inDomain(__1,int(1..3));int(1..)])} 

--

(0 != {__0#matrix_to_atom[__1, __1] @ and([__inDomain(__1,int(1..3)),__inDomain(__1,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __0#matrix_to_atom[__1, __1]) 

--

(0 != __0#matrix_to_atom[__1, __1]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),product([1,(__1 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__1 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__1 - 1);int(1..)]) 

--

product([(__1 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__1 - 1) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-(1);int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])]) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__1,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__1;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__1;int(1..)])])

Model before rewriting:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

true

[ __0[r, __1] | c : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__0[r, __1],__0[r, __1],__0[r, __1];int(1..)] 

--

(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)) 

--

__0#matrix_to_atom[r, __1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])} 

--

(true != (sum([{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])},__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)) 

--

__0#matrix_to_atom[r, __1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])} 

--

(true != (sum([__0#matrix_to_atom[r, __1],{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])},__0#matrix_to_atom[r, __1];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)) 

--

__0#matrix_to_atom[r, __1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])} 

--

(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],{__0#matrix_to_atom[r, __1] @ and([__inDomain(r,int(1..3)),__inDomain(__1,int(1..3));int(1..)])};int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)) 

--

(true != (sum([__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1],__0#matrix_to_atom[r, __1];int(1..)]) = __2)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(__1 - 1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(__1 - 1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(__1 - 1);int(1..)]),1;int(1..)])];int(1..)]) = __2)) 

--

product([1,(__1 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__1 - 1);int(1..)]) 

--

product([(__1 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__1 - 1) 

--

product([1,(__1 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__1 - 1);int(1..)]) 

--

product([(__1 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__1 - 1) 

--

product([1,(__1 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__1 - 1);int(1..)]) 

--

product([(__1 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__1 - 1) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-(1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-(1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),(__1 - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([r,-1;int(1..)]);int(1..)]),sum([__1,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1,-1,1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2)) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __3) 
new variables:
  find __3: bool
new constraints:
  __3 =aux (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2)
--

__3 =aux (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2), __3) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(true != __3),
Reify((sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),__1;int(1..)])];int(1..)]) = __2), __3)

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)

such that

(true != (sum([ __0[__1, c] | r : Index ]) = __2))

--

(true != (sum([ __0[__1, c] | r : Index ]) = __2)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __0[__1, c] | r : Index ]) = __2)) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index

such that

(0 != __0[__1, __2])

--

(0 != __0#matrix_to_atom[__1, __2]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __0#matrix_to_atom[__1, __2]) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

__0#matrix_to_atom[__1, __2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[__1, __2] @ and([__inDomain(__1,int(1..3)),__inDomain(__2,int(1..3));int(1..)])} 

--

(0 != {__0#matrix_to_atom[__1, __2] @ and([__inDomain(__1,int(1..3)),__inDomain(__2,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __0#matrix_to_atom[__1, __2]) 

--

(0 != __0#matrix_to_atom[__1, __2]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),product([1,(__2 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__2 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__2 - 1);int(1..)]) 

--

product([(__2 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__2 - 1) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-(1);int(1..)]);int(1..)]),(__2 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),(__2 - 1),1;int(1..)])]) 

--

(__2 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__2,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__2,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__2,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([__2,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__2,-1,1;int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__2,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__2;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),__2;int(1..)])])

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

true

[ __0[__1, c] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__0[__1, c],__0[__1, c],__0[__1, c];int(1..)] 

--

(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)) 

--

__0#matrix_to_atom[__1, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)) 

--

__0#matrix_to_atom[__1, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__0#matrix_to_atom[__1, c],{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__0#matrix_to_atom[__1, c];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)) 

--

__0#matrix_to_atom[__1, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],{__0#matrix_to_atom[__1, c] @ and([__inDomain(__1,int(1..3)),__inDomain(c,int(1..3));int(1..)])};int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)) 

--

(true != (sum([__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c],__0#matrix_to_atom[__1, c];int(1..)]) = __2)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])];int(1..)]) = __2)) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(__1 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(__1 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__1,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __2)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])];int(1..)]) = __2)) 

--

sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])];int(1..)]) = __2)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2)) 

--

(true != (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __3) 
new variables:
  find __3: bool
new constraints:
  __3 =aux (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2)
--

__3 =aux (sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2), __3) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(true != __3),
Reify((sum([[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])],[__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__1,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __2), __3)

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value

such that

(0 != __0[d, d])

--

(0 != __0#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __0#matrix_to_atom[d, d]) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

__0#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__0#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __0#matrix_to_atom[d, d]) 

--

(0 != __0#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value

such that

(0 != __0[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __0#matrix_to_atom_1_1: int(1..9)
  find __0#matrix_to_atom_1_2: int(1..9)
  find __0#matrix_to_atom_1_3: int(1..9)
  find __0#matrix_to_atom_2_1: int(1..9)
  find __0#matrix_to_atom_2_2: int(1..9)
  find __0#matrix_to_atom_2_3: int(1..9)
  find __0#matrix_to_atom_3_1: int(1..9)
  find __0#matrix_to_atom_3_2: int(1..9)
  find __0#matrix_to_atom_3_3: int(1..9)
--

__0#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__0#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__0#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__0#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__0#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __0#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__0#matrix_to_atom_1_1,__0#matrix_to_atom_1_2,__0#matrix_to_atom_1_3,__0#matrix_to_atom_2_1,__0#matrix_to_atom_2_2,__0#matrix_to_atom_2_3,__0#matrix_to_atom_3_1,__0#matrix_to_atom_3_2,__0#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

true

[ (sum([ square[r, c] | c : Index ]) = s) | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[(sum([ square[1, c] | c : Index ]) = s),(sum([ square[2, c] | c : Index ]) = s),(sum([ square[3, c] | c : Index ]) = s);int(1..)] 

--

allDiff(flatten(square)),
and([(sum([ square[1, c] | c : Index ]) = s),(sum([ square[2, c] | c : Index ]) = s),(sum([ square[3, c] | c : Index ]) = s);int(1..)]),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([ square[1, c] | c : Index ]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != __2[1, c])

--

(0 != __2#matrix_to_atom[1, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __2#matrix_to_atom[1, c]) 
new variables:
  find __2#matrix_to_atom_1_1: int(1..9)
  find __2#matrix_to_atom_1_2: int(1..9)
  find __2#matrix_to_atom_1_3: int(1..9)
  find __2#matrix_to_atom_2_1: int(1..9)
  find __2#matrix_to_atom_2_2: int(1..9)
  find __2#matrix_to_atom_2_3: int(1..9)
  find __2#matrix_to_atom_3_1: int(1..9)
  find __2#matrix_to_atom_3_2: int(1..9)
  find __2#matrix_to_atom_3_3: int(1..9)
--

__2#matrix_to_atom[1, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__2#matrix_to_atom[1, c] @ and([__inDomain(1,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__2#matrix_to_atom[1, c] @ and([__inDomain(1,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __2#matrix_to_atom[1, c]) 

--

(0 != __2#matrix_to_atom[1, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,(1 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,(1 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),1;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,1;int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([c,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([c;int(1..)])]) 

--

sum([c;int(1..)]), 
   ~~> remove_unit_vector_sum ([("Base", 8800)]) 
c 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][c])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != __3[2, c])

--

(0 != __3#matrix_to_atom[2, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __3#matrix_to_atom[2, c]) 
new variables:
  find __3#matrix_to_atom_1_1: int(1..9)
  find __3#matrix_to_atom_1_2: int(1..9)
  find __3#matrix_to_atom_1_3: int(1..9)
  find __3#matrix_to_atom_2_1: int(1..9)
  find __3#matrix_to_atom_2_2: int(1..9)
  find __3#matrix_to_atom_2_3: int(1..9)
  find __3#matrix_to_atom_3_1: int(1..9)
  find __3#matrix_to_atom_3_2: int(1..9)
  find __3#matrix_to_atom_3_3: int(1..9)
--

__3#matrix_to_atom[2, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__3#matrix_to_atom[2, c] @ and([__inDomain(2,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__3#matrix_to_atom[2, c] @ and([__inDomain(2,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __3#matrix_to_atom[2, c]) 

--

(0 != __3#matrix_to_atom[2, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,(2 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,(2 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),4;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),4;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),4;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),4;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,4;int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([c,-1,4;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([c,3;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([c,3;int(1..)])])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != __4[3, c])

--

(0 != __4#matrix_to_atom[3, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __4#matrix_to_atom[3, c]) 
new variables:
  find __4#matrix_to_atom_1_1: int(1..9)
  find __4#matrix_to_atom_1_2: int(1..9)
  find __4#matrix_to_atom_1_3: int(1..9)
  find __4#matrix_to_atom_2_1: int(1..9)
  find __4#matrix_to_atom_2_2: int(1..9)
  find __4#matrix_to_atom_2_3: int(1..9)
  find __4#matrix_to_atom_3_1: int(1..9)
  find __4#matrix_to_atom_3_2: int(1..9)
  find __4#matrix_to_atom_3_3: int(1..9)
--

__4#matrix_to_atom[3, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__4#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __4#matrix_to_atom[3, c]) 

--

(0 != __4#matrix_to_atom[3, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),7;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),7;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),7;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,7;int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([c,-1,7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(true != (sum([ __4[__5, c] | r : Index ]) = __6))

--

(true != (sum([ __4[__5, c] | r : Index ]) = __6)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __4[__5, c] | r : Index ]) = __6)) 
new variables:
  find __4#matrix_to_atom_1_1: int(1..9)
  find __4#matrix_to_atom_1_2: int(1..9)
  find __4#matrix_to_atom_1_3: int(1..9)
  find __4#matrix_to_atom_2_1: int(1..9)
  find __4#matrix_to_atom_2_2: int(1..9)
  find __4#matrix_to_atom_2_3: int(1..9)
  find __4#matrix_to_atom_3_1: int(1..9)
  find __4#matrix_to_atom_3_2: int(1..9)
  find __4#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != __3[__4, __5])

--

(0 != __3#matrix_to_atom[__4, __5]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __3#matrix_to_atom[__4, __5]) 
new variables:
  find __3#matrix_to_atom_1_1: int(1..9)
  find __3#matrix_to_atom_1_2: int(1..9)
  find __3#matrix_to_atom_1_3: int(1..9)
  find __3#matrix_to_atom_2_1: int(1..9)
  find __3#matrix_to_atom_2_2: int(1..9)
  find __3#matrix_to_atom_2_3: int(1..9)
  find __3#matrix_to_atom_3_1: int(1..9)
  find __3#matrix_to_atom_3_2: int(1..9)
  find __3#matrix_to_atom_3_3: int(1..9)
--

__3#matrix_to_atom[__4, __5], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__3#matrix_to_atom[__4, __5] @ and([__inDomain(__4,int(1..3)),__inDomain(__5,int(1..3));int(1..)])} 

--

(0 != {__3#matrix_to_atom[__4, __5] @ and([__inDomain(__4,int(1..3)),__inDomain(__5,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __3#matrix_to_atom[__4, __5]) 

--

(0 != __3#matrix_to_atom[__4, __5]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,(__4 - 1);int(1..)]),product([1,(__5 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__5 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__5 - 1);int(1..)]) 

--

product([(__5 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__5 - 1) 

--

(__4 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__4,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-(1);int(1..)]);int(1..)]),(__5 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),(__5 - 1),1;int(1..)])]) 

--

(__5 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__5,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),sum([__5,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),sum([__5,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),sum([__5,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),__5,-1,1;int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),__5,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),__5;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__4,-1;int(1..)]);int(1..)]),__5;int(1..)])])

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

true

[ __4[__5, c] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__4[__5, c],__4[__5, c],__4[__5, c];int(1..)] 

--

(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)) 

--

__4#matrix_to_atom[__5, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)) 

--

__4#matrix_to_atom[__5, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__4#matrix_to_atom[__5, c],{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__4#matrix_to_atom[__5, c];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)) 

--

__4#matrix_to_atom[__5, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],{__4#matrix_to_atom[__5, c] @ and([__inDomain(__5,int(1..3)),__inDomain(c,int(1..3));int(1..)])};int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)) 

--

(true != (sum([__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c],__4#matrix_to_atom[__5, c];int(1..)]) = __6)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])];int(1..)]) = __6)) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(__5 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__5,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

(__5 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__5,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(__5 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

(__5 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__5,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __6)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])];int(1..)]) = __6)) 

--

sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])];int(1..)]) = __6)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6)) 

--

(true != (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __7) 
new variables:
  find __7: bool
new constraints:
  __7 =aux (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6)
--

__7 =aux (sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6), __7) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(true != __7),
Reify((sum([[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])],[__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__5,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __6), __7)

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != __1[d, d])

--

(0 != __1#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __1#matrix_to_atom[d, d]) 
new variables:
  find __1#matrix_to_atom_1_1: int(1..9)
  find __1#matrix_to_atom_1_2: int(1..9)
  find __1#matrix_to_atom_1_3: int(1..9)
  find __1#matrix_to_atom_2_1: int(1..9)
  find __1#matrix_to_atom_2_2: int(1..9)
  find __1#matrix_to_atom_2_3: int(1..9)
  find __1#matrix_to_atom_3_1: int(1..9)
  find __1#matrix_to_atom_3_2: int(1..9)
  find __1#matrix_to_atom_3_3: int(1..9)
--

__1#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__1#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__1#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __1#matrix_to_atom[d, d]) 

--

(0 != __1#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)

such that

(0 != __1[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __1#matrix_to_atom_1_1: int(1..9)
  find __1#matrix_to_atom_1_2: int(1..9)
  find __1#matrix_to_atom_1_3: int(1..9)
  find __1#matrix_to_atom_2_1: int(1..9)
  find __1#matrix_to_atom_2_2: int(1..9)
  find __1#matrix_to_atom_2_3: int(1..9)
  find __1#matrix_to_atom_3_1: int(1..9)
  find __1#matrix_to_atom_3_2: int(1..9)
  find __1#matrix_to_atom_3_3: int(1..9)
--

__1#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__1#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__1#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__1#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__1#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __1#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__1#matrix_to_atom_1_1,__1#matrix_to_atom_1_2,__1#matrix_to_atom_1_3,__1#matrix_to_atom_2_1,__1#matrix_to_atom_2_2,__1#matrix_to_atom_2_3,__1#matrix_to_atom_3_1,__1#matrix_to_atom_3_2,__1#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[1, c] | c : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 1],square[1, 2],square[1, 3];int(1..)] 

--

square[1, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[1, 2],square[1, 3];int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[1, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 2] @ and([__inDomain(1,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],{square[1, 2] @ and([__inDomain(1,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[1, 3];int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[1, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([ square[2, c] | c : Index ]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != __5[2, c])

--

(0 != __5#matrix_to_atom[2, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __5#matrix_to_atom[2, c]) 
new variables:
  find __5#matrix_to_atom_1_1: int(1..9)
  find __5#matrix_to_atom_1_2: int(1..9)
  find __5#matrix_to_atom_1_3: int(1..9)
  find __5#matrix_to_atom_2_1: int(1..9)
  find __5#matrix_to_atom_2_2: int(1..9)
  find __5#matrix_to_atom_2_3: int(1..9)
  find __5#matrix_to_atom_3_1: int(1..9)
  find __5#matrix_to_atom_3_2: int(1..9)
  find __5#matrix_to_atom_3_3: int(1..9)
--

__5#matrix_to_atom[2, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__5#matrix_to_atom[2, c] @ and([__inDomain(2,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__5#matrix_to_atom[2, c] @ and([__inDomain(2,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __5#matrix_to_atom[2, c]) 

--

(0 != __5#matrix_to_atom[2, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,(2 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,(2 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),4;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),4;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),4;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),4;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,4;int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([c,-1,4;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([c,3;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([c,3;int(1..)])])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != __6[3, c])

--

(0 != __6#matrix_to_atom[3, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __6#matrix_to_atom[3, c]) 
new variables:
  find __6#matrix_to_atom_1_1: int(1..9)
  find __6#matrix_to_atom_1_2: int(1..9)
  find __6#matrix_to_atom_1_3: int(1..9)
  find __6#matrix_to_atom_2_1: int(1..9)
  find __6#matrix_to_atom_2_2: int(1..9)
  find __6#matrix_to_atom_2_3: int(1..9)
  find __6#matrix_to_atom_3_1: int(1..9)
  find __6#matrix_to_atom_3_2: int(1..9)
  find __6#matrix_to_atom_3_3: int(1..9)
--

__6#matrix_to_atom[3, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__6#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__6#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __6#matrix_to_atom[3, c]) 

--

(0 != __6#matrix_to_atom[3, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),7;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),7;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),7;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,7;int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([c,-1,7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(true != (sum([ __8[__9, c] | r : Index ]) = __10))

--

(true != (sum([ __8[__9, c] | r : Index ]) = __10)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __8[__9, c] | r : Index ]) = __10)) 
new variables:
  find __8#matrix_to_atom_1_1: int(1..9)
  find __8#matrix_to_atom_1_2: int(1..9)
  find __8#matrix_to_atom_1_3: int(1..9)
  find __8#matrix_to_atom_2_1: int(1..9)
  find __8#matrix_to_atom_2_2: int(1..9)
  find __8#matrix_to_atom_2_3: int(1..9)
  find __8#matrix_to_atom_3_1: int(1..9)
  find __8#matrix_to_atom_3_2: int(1..9)
  find __8#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != __6[__7, __8])

--

(0 != __6#matrix_to_atom[__7, __8]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __6#matrix_to_atom[__7, __8]) 
new variables:
  find __6#matrix_to_atom_1_1: int(1..9)
  find __6#matrix_to_atom_1_2: int(1..9)
  find __6#matrix_to_atom_1_3: int(1..9)
  find __6#matrix_to_atom_2_1: int(1..9)
  find __6#matrix_to_atom_2_2: int(1..9)
  find __6#matrix_to_atom_2_3: int(1..9)
  find __6#matrix_to_atom_3_1: int(1..9)
  find __6#matrix_to_atom_3_2: int(1..9)
  find __6#matrix_to_atom_3_3: int(1..9)
--

__6#matrix_to_atom[__7, __8], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__6#matrix_to_atom[__7, __8] @ and([__inDomain(__7,int(1..3)),__inDomain(__8,int(1..3));int(1..)])} 

--

(0 != {__6#matrix_to_atom[__7, __8] @ and([__inDomain(__7,int(1..3)),__inDomain(__8,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __6#matrix_to_atom[__7, __8]) 

--

(0 != __6#matrix_to_atom[__7, __8]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,(__7 - 1);int(1..)]),product([1,(__8 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__8 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__8 - 1);int(1..)]) 

--

product([(__8 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__8 - 1) 

--

(__7 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__7,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-(1);int(1..)]);int(1..)]),(__8 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),(__8 - 1),1;int(1..)])]) 

--

(__8 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__8,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),sum([__8,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),sum([__8,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),sum([__8,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),__8,-1,1;int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),__8,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),__8;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__7,-1;int(1..)]);int(1..)]),__8;int(1..)])])

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

true

[ __8[__9, c] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__8[__9, c],__8[__9, c],__8[__9, c];int(1..)] 

--

(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)) 

--

__8#matrix_to_atom[__9, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)) 

--

__8#matrix_to_atom[__9, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__8#matrix_to_atom[__9, c],{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__8#matrix_to_atom[__9, c];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)) 

--

__8#matrix_to_atom[__9, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],{__8#matrix_to_atom[__9, c] @ and([__inDomain(__9,int(1..3)),__inDomain(c,int(1..3));int(1..)])};int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)) 

--

(true != (sum([__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c],__8#matrix_to_atom[__9, c];int(1..)]) = __10)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])];int(1..)]) = __10)) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(__9 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__9,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

(__9 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__9,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(__9 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

(__9 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__9,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __10)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])];int(1..)]) = __10)) 

--

sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])];int(1..)]) = __10)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10)) 

--

(true != (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __11) 
new variables:
  find __11: bool
new constraints:
  __11 =aux (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10)
--

__11 =aux (sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10), __11) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

(true != __11),
Reify((sum([[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])],[__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__9,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __10), __11)

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)

such that

(0 != __2[d, d])

--

(0 != __2#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __2#matrix_to_atom[d, d]) 
new variables:
  find __2#matrix_to_atom_1_1: int(1..9)
  find __2#matrix_to_atom_1_2: int(1..9)
  find __2#matrix_to_atom_1_3: int(1..9)
  find __2#matrix_to_atom_2_1: int(1..9)
  find __2#matrix_to_atom_2_2: int(1..9)
  find __2#matrix_to_atom_2_3: int(1..9)
  find __2#matrix_to_atom_3_1: int(1..9)
  find __2#matrix_to_atom_3_2: int(1..9)
  find __2#matrix_to_atom_3_3: int(1..9)
--

__2#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__2#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__2#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __2#matrix_to_atom[d, d]) 

--

(0 != __2#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)

such that

(0 != __2[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __2#matrix_to_atom_1_1: int(1..9)
  find __2#matrix_to_atom_1_2: int(1..9)
  find __2#matrix_to_atom_1_3: int(1..9)
  find __2#matrix_to_atom_2_1: int(1..9)
  find __2#matrix_to_atom_2_2: int(1..9)
  find __2#matrix_to_atom_2_3: int(1..9)
  find __2#matrix_to_atom_3_1: int(1..9)
  find __2#matrix_to_atom_3_2: int(1..9)
  find __2#matrix_to_atom_3_3: int(1..9)
--

__2#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__2#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__2#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__2#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__2#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __2#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__2#matrix_to_atom_1_1,__2#matrix_to_atom_1_2,__2#matrix_to_atom_1_3,__2#matrix_to_atom_2_1,__2#matrix_to_atom_2_2,__2#matrix_to_atom_2_3,__2#matrix_to_atom_3_1,__2#matrix_to_atom_3_2,__2#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[2, c] | c : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[2, 1],square[2, 2],square[2, 3];int(1..)] 

--

square[2, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 1] @ and([__inDomain(2,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([{square[2, 1] @ and([__inDomain(2,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[2, 2],square[2, 3];int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[2, 3];int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 3] @ and([__inDomain(2,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],{square[2, 3] @ and([__inDomain(2,int(1..3)),__inDomain(3,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([ square[3, c] | c : Index ]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != __7[3, c])

--

(0 != __7#matrix_to_atom[3, c]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __7#matrix_to_atom[3, c]) 
new variables:
  find __7#matrix_to_atom_1_1: int(1..9)
  find __7#matrix_to_atom_1_2: int(1..9)
  find __7#matrix_to_atom_1_3: int(1..9)
  find __7#matrix_to_atom_2_1: int(1..9)
  find __7#matrix_to_atom_2_2: int(1..9)
  find __7#matrix_to_atom_2_3: int(1..9)
  find __7#matrix_to_atom_3_1: int(1..9)
  find __7#matrix_to_atom_3_2: int(1..9)
  find __7#matrix_to_atom_3_3: int(1..9)
--

__7#matrix_to_atom[3, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__7#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(0 != {__7#matrix_to_atom[3, c] @ and([__inDomain(3,int(1..3)),__inDomain(c,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __7#matrix_to_atom[3, c]) 

--

(0 != __7#matrix_to_atom[3, c]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,(3 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([1,(c - 1);int(1..)]),7;int(1..)])]) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([sum([c,-(1);int(1..)]),7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([sum([c,-1;int(1..)]),7;int(1..)])]) 

--

sum([sum([c,-1;int(1..)]),7;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([c,-1,7;int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([c,-1,7;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])]) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([c,6;int(1..)])])

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

(true != (sum([ __12[__13, c] | r : Index ]) = __14))

--

(true != (sum([ __12[__13, c] | r : Index ]) = __14)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __12[__13, c] | r : Index ]) = __14)) 
new variables:
  find __12#matrix_to_atom_1_1: int(1..9)
  find __12#matrix_to_atom_1_2: int(1..9)
  find __12#matrix_to_atom_1_3: int(1..9)
  find __12#matrix_to_atom_2_1: int(1..9)
  find __12#matrix_to_atom_2_2: int(1..9)
  find __12#matrix_to_atom_2_3: int(1..9)
  find __12#matrix_to_atom_3_1: int(1..9)
  find __12#matrix_to_atom_3_2: int(1..9)
  find __12#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != __9[__10, __11])

--

(0 != __9#matrix_to_atom[__10, __11]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __9#matrix_to_atom[__10, __11]) 
new variables:
  find __9#matrix_to_atom_1_1: int(1..9)
  find __9#matrix_to_atom_1_2: int(1..9)
  find __9#matrix_to_atom_1_3: int(1..9)
  find __9#matrix_to_atom_2_1: int(1..9)
  find __9#matrix_to_atom_2_2: int(1..9)
  find __9#matrix_to_atom_2_3: int(1..9)
  find __9#matrix_to_atom_3_1: int(1..9)
  find __9#matrix_to_atom_3_2: int(1..9)
  find __9#matrix_to_atom_3_3: int(1..9)
--

__9#matrix_to_atom[__10, __11], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__9#matrix_to_atom[__10, __11] @ and([__inDomain(__10,int(1..3)),__inDomain(__11,int(1..3));int(1..)])} 

--

(0 != {__9#matrix_to_atom[__10, __11] @ and([__inDomain(__10,int(1..3)),__inDomain(__11,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __9#matrix_to_atom[__10, __11]) 

--

(0 != __9#matrix_to_atom[__10, __11]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,(__10 - 1);int(1..)]),product([1,(__11 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__11 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__11 - 1);int(1..)]) 

--

product([(__11 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__11 - 1) 

--

(__10 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__10,-(1);int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-(1);int(1..)]);int(1..)]),(__11 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),(__11 - 1),1;int(1..)])]) 

--

(__11 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__11,-(1);int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),sum([__11,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),sum([__11,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),sum([__11,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),__11,-1,1;int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),__11,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),__11;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__10,-1;int(1..)]);int(1..)]),__11;int(1..)])])

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

such that

true

[ __12[__13, c] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__12[__13, c],__12[__13, c],__12[__13, c];int(1..)] 

--

(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)) 

--

__12#matrix_to_atom[__13, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)) 

--

__12#matrix_to_atom[__13, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__12#matrix_to_atom[__13, c],{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__12#matrix_to_atom[__13, c];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)) 

--

__12#matrix_to_atom[__13, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],{__12#matrix_to_atom[__13, c] @ and([__inDomain(__13,int(1..3)),__inDomain(c,int(1..3));int(1..)])};int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)) 

--

(true != (sum([__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c],__12#matrix_to_atom[__13, c];int(1..)]) = __14)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])];int(1..)]) = __14)) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(__13 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__13,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

(__13 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__13,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

(__13 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__13,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __14)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])];int(1..)]) = __14)) 

--

sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])];int(1..)]) = __14)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14)) 

--

(true != (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __15) 
new variables:
  find __15: bool
new constraints:
  __15 =aux (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14)
--

__15 =aux (sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14), __15) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __15: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

such that

(true != __15),
Reify((sum([[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])],[__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __14), __15)

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != __3[d, d])

--

(0 != __3#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __3#matrix_to_atom[d, d]) 
new variables:
  find __3#matrix_to_atom_1_1: int(1..9)
  find __3#matrix_to_atom_1_2: int(1..9)
  find __3#matrix_to_atom_1_3: int(1..9)
  find __3#matrix_to_atom_2_1: int(1..9)
  find __3#matrix_to_atom_2_2: int(1..9)
  find __3#matrix_to_atom_2_3: int(1..9)
  find __3#matrix_to_atom_3_1: int(1..9)
  find __3#matrix_to_atom_3_2: int(1..9)
  find __3#matrix_to_atom_3_3: int(1..9)
--

__3#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__3#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__3#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __3#matrix_to_atom[d, d]) 

--

(0 != __3#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)

such that

(0 != __3[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __3#matrix_to_atom_1_1: int(1..9)
  find __3#matrix_to_atom_1_2: int(1..9)
  find __3#matrix_to_atom_1_3: int(1..9)
  find __3#matrix_to_atom_2_1: int(1..9)
  find __3#matrix_to_atom_2_2: int(1..9)
  find __3#matrix_to_atom_2_3: int(1..9)
  find __3#matrix_to_atom_3_1: int(1..9)
  find __3#matrix_to_atom_3_2: int(1..9)
  find __3#matrix_to_atom_3_3: int(1..9)
--

__3#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__3#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__3#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__3#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__3#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __3#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__3#matrix_to_atom_1_1,__3#matrix_to_atom_1_2,__3#matrix_to_atom_1_3,__3#matrix_to_atom_2_1,__3#matrix_to_atom_2_2,__3#matrix_to_atom_2_3,__3#matrix_to_atom_3_1,__3#matrix_to_atom_3_2,__3#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[3, c] | c : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[3, 1],square[3, 2],square[3, 3];int(1..)] 

--

square[3, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[3, 2],square[3, 3];int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 2] @ and([__inDomain(3,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],{square[3, 2] @ and([__inDomain(3,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[3, 3];int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])};int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
and([ (sum([ square[r, c] | r : Index ]) = s) | c : Index ]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __15: bool
find __16: matrix indexed by [[Index, Index]] of Value
find __17: Index
find __18: int(1..24)
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

such that

(true != (sum([ __16[__17, c] | r : Index ]) = __18))

--

(true != (sum([ __16[__17, c] | r : Index ]) = __18)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([ __16[__17, c] | r : Index ]) = __18)) 
new variables:
  find __16#matrix_to_atom_1_1: int(1..9)
  find __16#matrix_to_atom_1_2: int(1..9)
  find __16#matrix_to_atom_1_3: int(1..9)
  find __16#matrix_to_atom_2_1: int(1..9)
  find __16#matrix_to_atom_2_2: int(1..9)
  find __16#matrix_to_atom_2_3: int(1..9)
  find __16#matrix_to_atom_3_1: int(1..9)
  find __16#matrix_to_atom_3_2: int(1..9)
  find __16#matrix_to_atom_3_3: int(1..9)
--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

such that

(0 != __12[__13, __14])

--

(0 != __12#matrix_to_atom[__13, __14]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __12#matrix_to_atom[__13, __14]) 
new variables:
  find __12#matrix_to_atom_1_1: int(1..9)
  find __12#matrix_to_atom_1_2: int(1..9)
  find __12#matrix_to_atom_1_3: int(1..9)
  find __12#matrix_to_atom_2_1: int(1..9)
  find __12#matrix_to_atom_2_2: int(1..9)
  find __12#matrix_to_atom_2_3: int(1..9)
  find __12#matrix_to_atom_3_1: int(1..9)
  find __12#matrix_to_atom_3_2: int(1..9)
  find __12#matrix_to_atom_3_3: int(1..9)
--

__12#matrix_to_atom[__13, __14], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__12#matrix_to_atom[__13, __14] @ and([__inDomain(__13,int(1..3)),__inDomain(__14,int(1..3));int(1..)])} 

--

(0 != {__12#matrix_to_atom[__13, __14] @ and([__inDomain(__13,int(1..3)),__inDomain(__14,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __12#matrix_to_atom[__13, __14]) 

--

(0 != __12#matrix_to_atom[__13, __14]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,(__13 - 1);int(1..)]),product([1,(__14 - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(__14 - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(__14 - 1);int(1..)]) 

--

product([(__14 - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(__14 - 1) 

--

(__13 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__13,-(1);int(1..)]) 

--

(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-(1);int(1..)]);int(1..)]),(__14 - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),(__14 - 1),1;int(1..)])]) 

--

(__14 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__14,-(1);int(1..)]) 

--

(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([__14,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([__14,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),sum([__14,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),__14,-1,1;int(1..)]) 

--

(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),__14,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),__14;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__12#matrix_to_atom_1_1,__12#matrix_to_atom_1_2,__12#matrix_to_atom_1_3,__12#matrix_to_atom_2_1,__12#matrix_to_atom_2_2,__12#matrix_to_atom_2_3,__12#matrix_to_atom_3_1,__12#matrix_to_atom_3_2,__12#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__13,-1;int(1..)]);int(1..)]),__14;int(1..)])])

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

such that

true

[ __16[__17, c] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[__16[__17, c],__16[__17, c],__16[__17, c];int(1..)] 

--

(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)) 

--

__16#matrix_to_atom[__17, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)) 

--

__16#matrix_to_atom[__17, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__16#matrix_to_atom[__17, c],{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])},__16#matrix_to_atom[__17, c];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)) 

--

__16#matrix_to_atom[__17, c], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])} 

--

(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],{__16#matrix_to_atom[__17, c] @ and([__inDomain(__17,int(1..3)),__inDomain(c,int(1..3));int(1..)])};int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)) 

--

(true != (sum([__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c],__16#matrix_to_atom[__17, c];int(1..)]) = __18)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),product([1,(c - 1);int(1..)]),1;int(1..)])];int(1..)]) = __18)) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

product([1,(c - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(c - 1);int(1..)]) 

--

product([(c - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(c - 1) 

--

(__17 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__17,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

(__17 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__17,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(__17 - 1);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

(__17 - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([__17,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-(1);int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),(c - 1),1;int(1..)])];int(1..)]) = __18)) 

--

(c - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([c,-(1);int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-(1);int(1..)]),1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)])];int(1..)]) = __18)) 

--

sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),sum([c,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)]) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c,-1,1;int(1..)])];int(1..)]) = __18)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18)) 

--

(true != (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18)), 
   ~~> flatten_generic ([("Minion", 4200)]) 
(true != __19) 
new variables:
  find __19: bool
new constraints:
  __19 =aux (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18)
--

__19 =aux (sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18), 
   ~~> bool_eq_to_reify ([("Minion", 4400)]) 
Reify((sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18), __19) 

--

Final model:

find c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __15: bool
find __16: matrix indexed by [[Index, Index]] of Value
find __17: Index
find __18: int(1..24)
find __19: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)

such that

(true != __19),
Reify((sum([[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])],[__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([__17,-1;int(1..)]);int(1..)]),c;int(1..)])];int(1..)]) = __18), __19)

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != __4[d, d])

--

(0 != __4#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __4#matrix_to_atom[d, d]) 
new variables:
  find __4#matrix_to_atom_1_1: int(1..9)
  find __4#matrix_to_atom_1_2: int(1..9)
  find __4#matrix_to_atom_1_3: int(1..9)
  find __4#matrix_to_atom_2_1: int(1..9)
  find __4#matrix_to_atom_2_2: int(1..9)
  find __4#matrix_to_atom_2_3: int(1..9)
  find __4#matrix_to_atom_3_1: int(1..9)
  find __4#matrix_to_atom_3_2: int(1..9)
  find __4#matrix_to_atom_3_3: int(1..9)
--

__4#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__4#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __4#matrix_to_atom[d, d]) 

--

(0 != __4#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)

such that

(0 != __4[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __4#matrix_to_atom_1_1: int(1..9)
  find __4#matrix_to_atom_1_2: int(1..9)
  find __4#matrix_to_atom_1_3: int(1..9)
  find __4#matrix_to_atom_2_1: int(1..9)
  find __4#matrix_to_atom_2_2: int(1..9)
  find __4#matrix_to_atom_2_3: int(1..9)
  find __4#matrix_to_atom_3_1: int(1..9)
  find __4#matrix_to_atom_3_2: int(1..9)
  find __4#matrix_to_atom_3_3: int(1..9)
--

__4#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__4#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__4#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__4#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__4#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __4#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__4#matrix_to_atom_1_1,__4#matrix_to_atom_1_2,__4#matrix_to_atom_1_3,__4#matrix_to_atom_2_1,__4#matrix_to_atom_2_2,__4#matrix_to_atom_2_3,__4#matrix_to_atom_3_1,__4#matrix_to_atom_3_2,__4#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __15: bool
find __16: matrix indexed by [[Index, Index]] of Value
find __17: Index
find __18: int(1..24)
find __19: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified c: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: int(1..24)
find __3: bool
find __4: matrix indexed by [[Index, Index]] of Value
find __5: Index
find __6: int(1..24)
find __7: bool
find __8: matrix indexed by [[Index, Index]] of Value
find __9: Index
find __10: int(1..24)
find __11: bool
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: int(1..24)
find __15: bool
find __16: matrix indexed by [[Index, Index]] of Value
find __17: Index
find __18: int(1..24)
find __19: bool
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)

such that

true

[ (sum([ square[r, c] | r : Index ]) = s) | c : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[(sum([ square[r, 1] | r : Index ]) = s),(sum([ square[r, 2] | r : Index ]) = s),(sum([ square[r, 3] | r : Index ]) = s);int(1..)] 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
and([(sum([ square[r, 1] | r : Index ]) = s),(sum([ square[r, 2] | r : Index ]) = s),(sum([ square[r, 3] | r : Index ]) = s);int(1..)]),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([ square[r, 1] | r : Index ]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)

such that

(0 != __15[r, 1])

--

(0 != __15#matrix_to_atom[r, 1]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __15#matrix_to_atom[r, 1]) 
new variables:
  find __15#matrix_to_atom_1_1: int(1..9)
  find __15#matrix_to_atom_1_2: int(1..9)
  find __15#matrix_to_atom_1_3: int(1..9)
  find __15#matrix_to_atom_2_1: int(1..9)
  find __15#matrix_to_atom_2_2: int(1..9)
  find __15#matrix_to_atom_2_3: int(1..9)
  find __15#matrix_to_atom_3_1: int(1..9)
  find __15#matrix_to_atom_3_2: int(1..9)
  find __15#matrix_to_atom_3_3: int(1..9)
--

__15#matrix_to_atom[r, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__15#matrix_to_atom[r, 1] @ and([__inDomain(r,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

(0 != {__15#matrix_to_atom[r, 1] @ and([__inDomain(r,int(1..3)),__inDomain(1,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __15#matrix_to_atom[r, 1]) 

--

(0 != __15#matrix_to_atom[r, 1]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(1 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(1 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),1;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),1;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__15#matrix_to_atom_1_1,__15#matrix_to_atom_1_2,__15#matrix_to_atom_1_3,__15#matrix_to_atom_2_1,__15#matrix_to_atom_2_2,__15#matrix_to_atom_2_3,__15#matrix_to_atom_3_1,__15#matrix_to_atom_3_2,__15#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),1;int(1..)])])

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)

such that

(0 != __16[r, 2])

--

(0 != __16#matrix_to_atom[r, 2]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __16#matrix_to_atom[r, 2]) 
new variables:
  find __16#matrix_to_atom_1_1: int(1..9)
  find __16#matrix_to_atom_1_2: int(1..9)
  find __16#matrix_to_atom_1_3: int(1..9)
  find __16#matrix_to_atom_2_1: int(1..9)
  find __16#matrix_to_atom_2_2: int(1..9)
  find __16#matrix_to_atom_2_3: int(1..9)
  find __16#matrix_to_atom_3_1: int(1..9)
  find __16#matrix_to_atom_3_2: int(1..9)
  find __16#matrix_to_atom_3_3: int(1..9)
--

__16#matrix_to_atom[r, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__16#matrix_to_atom[r, 2] @ and([__inDomain(r,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

(0 != {__16#matrix_to_atom[r, 2] @ and([__inDomain(r,int(1..3)),__inDomain(2,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __16#matrix_to_atom[r, 2]) 

--

(0 != __16#matrix_to_atom[r, 2]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(2 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(2 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),2;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),2;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),2;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__16#matrix_to_atom_1_1,__16#matrix_to_atom_1_2,__16#matrix_to_atom_1_3,__16#matrix_to_atom_2_1,__16#matrix_to_atom_2_2,__16#matrix_to_atom_2_3,__16#matrix_to_atom_3_1,__16#matrix_to_atom_3_2,__16#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),2;int(1..)])])

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)

such that

(0 != __17[r, 3])

--

(0 != __17#matrix_to_atom[r, 3]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __17#matrix_to_atom[r, 3]) 
new variables:
  find __17#matrix_to_atom_1_1: int(1..9)
  find __17#matrix_to_atom_1_2: int(1..9)
  find __17#matrix_to_atom_1_3: int(1..9)
  find __17#matrix_to_atom_2_1: int(1..9)
  find __17#matrix_to_atom_2_2: int(1..9)
  find __17#matrix_to_atom_2_3: int(1..9)
  find __17#matrix_to_atom_3_1: int(1..9)
  find __17#matrix_to_atom_3_2: int(1..9)
  find __17#matrix_to_atom_3_3: int(1..9)
--

__17#matrix_to_atom[r, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__17#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

(0 != {__17#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __17#matrix_to_atom[r, 3]) 

--

(0 != __17#matrix_to_atom[r, 3]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),3;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),3;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__17#matrix_to_atom_1_1,__17#matrix_to_atom_1_2,__17#matrix_to_atom_1_3,__17#matrix_to_atom_2_1,__17#matrix_to_atom_2_2,__17#matrix_to_atom_2_3,__17#matrix_to_atom_3_1,__17#matrix_to_atom_3_2,__17#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != __5[d, d])

--

(0 != __5#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __5#matrix_to_atom[d, d]) 
new variables:
  find __5#matrix_to_atom_1_1: int(1..9)
  find __5#matrix_to_atom_1_2: int(1..9)
  find __5#matrix_to_atom_1_3: int(1..9)
  find __5#matrix_to_atom_2_1: int(1..9)
  find __5#matrix_to_atom_2_2: int(1..9)
  find __5#matrix_to_atom_2_3: int(1..9)
  find __5#matrix_to_atom_3_1: int(1..9)
  find __5#matrix_to_atom_3_2: int(1..9)
  find __5#matrix_to_atom_3_3: int(1..9)
--

__5#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__5#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__5#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __5#matrix_to_atom[d, d]) 

--

(0 != __5#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)

such that

(0 != __5[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __5#matrix_to_atom_1_1: int(1..9)
  find __5#matrix_to_atom_1_2: int(1..9)
  find __5#matrix_to_atom_1_3: int(1..9)
  find __5#matrix_to_atom_2_1: int(1..9)
  find __5#matrix_to_atom_2_2: int(1..9)
  find __5#matrix_to_atom_2_3: int(1..9)
  find __5#matrix_to_atom_3_1: int(1..9)
  find __5#matrix_to_atom_3_2: int(1..9)
  find __5#matrix_to_atom_3_3: int(1..9)
--

__5#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__5#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__5#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__5#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__5#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __5#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__5#matrix_to_atom_1_1,__5#matrix_to_atom_1_2,__5#matrix_to_atom_1_3,__5#matrix_to_atom_2_1,__5#matrix_to_atom_2_2,__5#matrix_to_atom_2_3,__5#matrix_to_atom_3_1,__5#matrix_to_atom_3_2,__5#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[r, 1] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 1],square[2, 1],square[3, 1];int(1..)] 

--

square[1, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[2, 1],square[3, 1];int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 1] @ and([__inDomain(2,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],{square[2, 1] @ and([__inDomain(2,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[3, 1];int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([ square[r, 2] | r : Index ]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)

such that

(0 != __18[r, 2])

--

(0 != __18#matrix_to_atom[r, 2]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __18#matrix_to_atom[r, 2]) 
new variables:
  find __18#matrix_to_atom_1_1: int(1..9)
  find __18#matrix_to_atom_1_2: int(1..9)
  find __18#matrix_to_atom_1_3: int(1..9)
  find __18#matrix_to_atom_2_1: int(1..9)
  find __18#matrix_to_atom_2_2: int(1..9)
  find __18#matrix_to_atom_2_3: int(1..9)
  find __18#matrix_to_atom_3_1: int(1..9)
  find __18#matrix_to_atom_3_2: int(1..9)
  find __18#matrix_to_atom_3_3: int(1..9)
--

__18#matrix_to_atom[r, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__18#matrix_to_atom[r, 2] @ and([__inDomain(r,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

(0 != {__18#matrix_to_atom[r, 2] @ and([__inDomain(r,int(1..3)),__inDomain(2,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __18#matrix_to_atom[r, 2]) 

--

(0 != __18#matrix_to_atom[r, 2]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(2 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(2 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),2;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),2;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),2;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__18#matrix_to_atom_1_1,__18#matrix_to_atom_1_2,__18#matrix_to_atom_1_3,__18#matrix_to_atom_2_1,__18#matrix_to_atom_2_2,__18#matrix_to_atom_2_3,__18#matrix_to_atom_3_1,__18#matrix_to_atom_3_2,__18#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),2;int(1..)])])

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)

such that

(0 != __19[r, 3])

--

(0 != __19#matrix_to_atom[r, 3]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __19#matrix_to_atom[r, 3]) 
new variables:
  find __19#matrix_to_atom_1_1: int(1..9)
  find __19#matrix_to_atom_1_2: int(1..9)
  find __19#matrix_to_atom_1_3: int(1..9)
  find __19#matrix_to_atom_2_1: int(1..9)
  find __19#matrix_to_atom_2_2: int(1..9)
  find __19#matrix_to_atom_2_3: int(1..9)
  find __19#matrix_to_atom_3_1: int(1..9)
  find __19#matrix_to_atom_3_2: int(1..9)
  find __19#matrix_to_atom_3_3: int(1..9)
--

__19#matrix_to_atom[r, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__19#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

(0 != {__19#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __19#matrix_to_atom[r, 3]) 

--

(0 != __19#matrix_to_atom[r, 3]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),3;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),3;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__19#matrix_to_atom_1_1,__19#matrix_to_atom_1_2,__19#matrix_to_atom_1_3,__19#matrix_to_atom_2_1,__19#matrix_to_atom_2_2,__19#matrix_to_atom_2_3,__19#matrix_to_atom_3_1,__19#matrix_to_atom_3_2,__19#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != __6[d, d])

--

(0 != __6#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __6#matrix_to_atom[d, d]) 
new variables:
  find __6#matrix_to_atom_1_1: int(1..9)
  find __6#matrix_to_atom_1_2: int(1..9)
  find __6#matrix_to_atom_1_3: int(1..9)
  find __6#matrix_to_atom_2_1: int(1..9)
  find __6#matrix_to_atom_2_2: int(1..9)
  find __6#matrix_to_atom_2_3: int(1..9)
  find __6#matrix_to_atom_3_1: int(1..9)
  find __6#matrix_to_atom_3_2: int(1..9)
  find __6#matrix_to_atom_3_3: int(1..9)
--

__6#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__6#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__6#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __6#matrix_to_atom[d, d]) 

--

(0 != __6#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)

such that

(0 != __6[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __6#matrix_to_atom_1_1: int(1..9)
  find __6#matrix_to_atom_1_2: int(1..9)
  find __6#matrix_to_atom_1_3: int(1..9)
  find __6#matrix_to_atom_2_1: int(1..9)
  find __6#matrix_to_atom_2_2: int(1..9)
  find __6#matrix_to_atom_2_3: int(1..9)
  find __6#matrix_to_atom_3_1: int(1..9)
  find __6#matrix_to_atom_3_2: int(1..9)
  find __6#matrix_to_atom_3_3: int(1..9)
--

__6#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__6#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__6#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__6#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__6#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __6#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__6#matrix_to_atom_1_1,__6#matrix_to_atom_1_2,__6#matrix_to_atom_1_3,__6#matrix_to_atom_2_1,__6#matrix_to_atom_2_2,__6#matrix_to_atom_2_3,__6#matrix_to_atom_3_1,__6#matrix_to_atom_3_2,__6#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[r, 2] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 2],square[2, 2],square[3, 2];int(1..)] 

--

square[1, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 2] @ and([__inDomain(1,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([{square[1, 2] @ and([__inDomain(1,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[2, 2],square[3, 2];int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[3, 2];int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 2] @ and([__inDomain(3,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],{square[3, 2] @ and([__inDomain(3,int(1..3)),__inDomain(2,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([ square[r, 3] | r : Index ]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __20: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)

such that

(0 != __20[r, 3])

--

(0 != __20#matrix_to_atom[r, 3]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __20#matrix_to_atom[r, 3]) 
new variables:
  find __20#matrix_to_atom_1_1: int(1..9)
  find __20#matrix_to_atom_1_2: int(1..9)
  find __20#matrix_to_atom_1_3: int(1..9)
  find __20#matrix_to_atom_2_1: int(1..9)
  find __20#matrix_to_atom_2_2: int(1..9)
  find __20#matrix_to_atom_2_3: int(1..9)
  find __20#matrix_to_atom_3_1: int(1..9)
  find __20#matrix_to_atom_3_2: int(1..9)
  find __20#matrix_to_atom_3_3: int(1..9)
--

__20#matrix_to_atom[r, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__20#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

(0 != {__20#matrix_to_atom[r, 3] @ and([__inDomain(r,int(1..3)),__inDomain(3,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __20#matrix_to_atom[r, 3]) 

--

(0 != __20#matrix_to_atom[r, 3]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]) 

--

(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),product([1,(3 - 1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,(r - 1);int(1..)]),3;int(1..)])]) 

--

(r - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([r,-(1);int(1..)]) 

--

(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-(1);int(1..)]);int(1..)]),3;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])]) 

--

Final model:

find r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __20: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)
find __20#matrix_to_atom_1_1: int(1..9)
find __20#matrix_to_atom_1_2: int(1..9)
find __20#matrix_to_atom_1_3: int(1..9)
find __20#matrix_to_atom_2_1: int(1..9)
find __20#matrix_to_atom_2_2: int(1..9)
find __20#matrix_to_atom_2_3: int(1..9)
find __20#matrix_to_atom_3_1: int(1..9)
find __20#matrix_to_atom_3_2: int(1..9)
find __20#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__20#matrix_to_atom_1_1,__20#matrix_to_atom_1_2,__20#matrix_to_atom_1_3,__20#matrix_to_atom_2_1,__20#matrix_to_atom_2_2,__20#matrix_to_atom_2_3,__20#matrix_to_atom_3_1,__20#matrix_to_atom_3_2,__20#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([r,-1;int(1..)]);int(1..)]),3;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != __7[d, d])

--

(0 != __7#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __7#matrix_to_atom[d, d]) 
new variables:
  find __7#matrix_to_atom_1_1: int(1..9)
  find __7#matrix_to_atom_1_2: int(1..9)
  find __7#matrix_to_atom_1_3: int(1..9)
  find __7#matrix_to_atom_2_1: int(1..9)
  find __7#matrix_to_atom_2_2: int(1..9)
  find __7#matrix_to_atom_2_3: int(1..9)
  find __7#matrix_to_atom_3_1: int(1..9)
  find __7#matrix_to_atom_3_2: int(1..9)
  find __7#matrix_to_atom_3_3: int(1..9)
--

__7#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__7#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__7#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __7#matrix_to_atom[d, d]) 

--

(0 != __7#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)

such that

(0 != __7[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __7#matrix_to_atom_1_1: int(1..9)
  find __7#matrix_to_atom_1_2: int(1..9)
  find __7#matrix_to_atom_1_3: int(1..9)
  find __7#matrix_to_atom_2_1: int(1..9)
  find __7#matrix_to_atom_2_2: int(1..9)
  find __7#matrix_to_atom_2_3: int(1..9)
  find __7#matrix_to_atom_3_1: int(1..9)
  find __7#matrix_to_atom_3_2: int(1..9)
  find __7#matrix_to_atom_3_3: int(1..9)
--

__7#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__7#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__7#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__7#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__7#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __7#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__7#matrix_to_atom_1_1,__7#matrix_to_atom_1_2,__7#matrix_to_atom_1_3,__7#matrix_to_atom_2_1,__7#matrix_to_atom_2_2,__7#matrix_to_atom_2_3,__7#matrix_to_atom_3_1,__7#matrix_to_atom_3_2,__7#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __20: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)
find __20#matrix_to_atom_1_1: int(1..9)
find __20#matrix_to_atom_1_2: int(1..9)
find __20#matrix_to_atom_1_3: int(1..9)
find __20#matrix_to_atom_2_1: int(1..9)
find __20#matrix_to_atom_2_2: int(1..9)
find __20#matrix_to_atom_2_3: int(1..9)
find __20#matrix_to_atom_3_1: int(1..9)
find __20#matrix_to_atom_3_2: int(1..9)
find __20#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified r: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: Index
find __2: Index
find __3: matrix indexed by [[Index, Index]] of Value
find __4: Index
find __5: Index
find __6: matrix indexed by [[Index, Index]] of Value
find __7: Index
find __8: Index
find __9: matrix indexed by [[Index, Index]] of Value
find __10: Index
find __11: Index
find __12: matrix indexed by [[Index, Index]] of Value
find __13: Index
find __14: Index
find __15: matrix indexed by [[Index, Index]] of Value
find __16: matrix indexed by [[Index, Index]] of Value
find __17: matrix indexed by [[Index, Index]] of Value
find __18: matrix indexed by [[Index, Index]] of Value
find __19: matrix indexed by [[Index, Index]] of Value
find __20: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)
find __12#matrix_to_atom_1_1: int(1..9)
find __12#matrix_to_atom_1_2: int(1..9)
find __12#matrix_to_atom_1_3: int(1..9)
find __12#matrix_to_atom_2_1: int(1..9)
find __12#matrix_to_atom_2_2: int(1..9)
find __12#matrix_to_atom_2_3: int(1..9)
find __12#matrix_to_atom_3_1: int(1..9)
find __12#matrix_to_atom_3_2: int(1..9)
find __12#matrix_to_atom_3_3: int(1..9)
find __15#matrix_to_atom_1_1: int(1..9)
find __15#matrix_to_atom_1_2: int(1..9)
find __15#matrix_to_atom_1_3: int(1..9)
find __15#matrix_to_atom_2_1: int(1..9)
find __15#matrix_to_atom_2_2: int(1..9)
find __15#matrix_to_atom_2_3: int(1..9)
find __15#matrix_to_atom_3_1: int(1..9)
find __15#matrix_to_atom_3_2: int(1..9)
find __15#matrix_to_atom_3_3: int(1..9)
find __16#matrix_to_atom_1_1: int(1..9)
find __16#matrix_to_atom_1_2: int(1..9)
find __16#matrix_to_atom_1_3: int(1..9)
find __16#matrix_to_atom_2_1: int(1..9)
find __16#matrix_to_atom_2_2: int(1..9)
find __16#matrix_to_atom_2_3: int(1..9)
find __16#matrix_to_atom_3_1: int(1..9)
find __16#matrix_to_atom_3_2: int(1..9)
find __16#matrix_to_atom_3_3: int(1..9)
find __17#matrix_to_atom_1_1: int(1..9)
find __17#matrix_to_atom_1_2: int(1..9)
find __17#matrix_to_atom_1_3: int(1..9)
find __17#matrix_to_atom_2_1: int(1..9)
find __17#matrix_to_atom_2_2: int(1..9)
find __17#matrix_to_atom_2_3: int(1..9)
find __17#matrix_to_atom_3_1: int(1..9)
find __17#matrix_to_atom_3_2: int(1..9)
find __17#matrix_to_atom_3_3: int(1..9)
find __18#matrix_to_atom_1_1: int(1..9)
find __18#matrix_to_atom_1_2: int(1..9)
find __18#matrix_to_atom_1_3: int(1..9)
find __18#matrix_to_atom_2_1: int(1..9)
find __18#matrix_to_atom_2_2: int(1..9)
find __18#matrix_to_atom_2_3: int(1..9)
find __18#matrix_to_atom_3_1: int(1..9)
find __18#matrix_to_atom_3_2: int(1..9)
find __18#matrix_to_atom_3_3: int(1..9)
find __19#matrix_to_atom_1_1: int(1..9)
find __19#matrix_to_atom_1_2: int(1..9)
find __19#matrix_to_atom_1_3: int(1..9)
find __19#matrix_to_atom_2_1: int(1..9)
find __19#matrix_to_atom_2_2: int(1..9)
find __19#matrix_to_atom_2_3: int(1..9)
find __19#matrix_to_atom_3_1: int(1..9)
find __19#matrix_to_atom_3_2: int(1..9)
find __19#matrix_to_atom_3_3: int(1..9)
find __20#matrix_to_atom_1_1: int(1..9)
find __20#matrix_to_atom_1_2: int(1..9)
find __20#matrix_to_atom_1_3: int(1..9)
find __20#matrix_to_atom_2_1: int(1..9)
find __20#matrix_to_atom_2_2: int(1..9)
find __20#matrix_to_atom_2_3: int(1..9)
find __20#matrix_to_atom_3_1: int(1..9)
find __20#matrix_to_atom_3_2: int(1..9)
find __20#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[r, 3] | r : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 3],square[2, 3],square[3, 3];int(1..)] 

--

square[1, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])},square[2, 3],square[3, 3];int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 3] @ and([__inDomain(2,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],{square[2, 3] @ and([__inDomain(2,int(1..3)),__inDomain(3,int(1..3));int(1..)])},square[3, 3];int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([ square[d, d] | d : Index ]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

(0 != __8[d, d])

--

(0 != __8#matrix_to_atom[d, d]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __8#matrix_to_atom[d, d]) 
new variables:
  find __8#matrix_to_atom_1_1: int(1..9)
  find __8#matrix_to_atom_1_2: int(1..9)
  find __8#matrix_to_atom_1_3: int(1..9)
  find __8#matrix_to_atom_2_1: int(1..9)
  find __8#matrix_to_atom_2_2: int(1..9)
  find __8#matrix_to_atom_2_3: int(1..9)
  find __8#matrix_to_atom_3_1: int(1..9)
  find __8#matrix_to_atom_3_2: int(1..9)
  find __8#matrix_to_atom_3_3: int(1..9)
--

__8#matrix_to_atom[d, d], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__8#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])} 

--

(0 != {__8#matrix_to_atom[d, d] @ and([__inDomain(d,int(1..3)),__inDomain(d,int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __8#matrix_to_atom[d, d]) 

--

(0 != __8#matrix_to_atom[d, d]), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(d - 1);int(1..)]),1;int(1..)])]) 

--

product([1,(d - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(d - 1);int(1..)]) 

--

product([(d - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(d - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(d - 1),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(d - 1),1;int(1..)])]) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-(1);int(1..)]),1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)])]) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([d,-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d,-1,1;int(1..)])]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])]) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),d;int(1..)])])

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)

such that

(0 != __8[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __8#matrix_to_atom_1_1: int(1..9)
  find __8#matrix_to_atom_1_2: int(1..9)
  find __8#matrix_to_atom_1_3: int(1..9)
  find __8#matrix_to_atom_2_1: int(1..9)
  find __8#matrix_to_atom_2_2: int(1..9)
  find __8#matrix_to_atom_2_3: int(1..9)
  find __8#matrix_to_atom_3_1: int(1..9)
  find __8#matrix_to_atom_3_2: int(1..9)
  find __8#matrix_to_atom_3_3: int(1..9)
--

__8#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__8#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__8#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__8#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__8#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __8#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__8#matrix_to_atom_1_1,__8#matrix_to_atom_1_2,__8#matrix_to_atom_1_3,__8#matrix_to_atom_2_1,__8#matrix_to_atom_2_2,__8#matrix_to_atom_2_3,__8#matrix_to_atom_3_1,__8#matrix_to_atom_3_2,__8#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[d, d] | d : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 1],square[2, 2],square[3, 3];int(1..)] 

--

square[1, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([{square[1, 1] @ and([__inDomain(1,int(1..3)),__inDomain(1,int(1..3));int(1..)])},square[2, 2],square[3, 3];int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[2, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[3, 3];int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

square[3, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],{square[3, 3] @ and([__inDomain(3,int(1..3)),__inDomain(3,int(1..3));int(1..)])};int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([ square[d, (4 - d)] | d : Index ]) = s) 

--

Model before rewriting:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __9: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)

such that

(0 != __9[d, (4 - d)])

--

(4 - d), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([4,-(d);int(1..)]) 

--

(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]), 
   ~~> select_representation_matrix ([("Representations", 8001)]) 
(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]) 
new variables:
  find __9#matrix_to_atom_1_1: int(1..9)
  find __9#matrix_to_atom_1_2: int(1..9)
  find __9#matrix_to_atom_1_3: int(1..9)
  find __9#matrix_to_atom_2_1: int(1..9)
  find __9#matrix_to_atom_2_2: int(1..9)
  find __9#matrix_to_atom_2_3: int(1..9)
  find __9#matrix_to_atom_3_1: int(1..9)
  find __9#matrix_to_atom_3_2: int(1..9)
  find __9#matrix_to_atom_3_3: int(1..9)
--

__9#matrix_to_atom[d, sum([4,-(d);int(1..)])], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{__9#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

(0 != {__9#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(d,int(1..3)),__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != {__9#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}) 

--

(0 != {__9#matrix_to_atom[d, sum([4,-(d);int(1..)])] @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}), 
   ~~> bubble_up ([("Bubble", 8800)]) 
{(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])} 

--

{(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]) @ and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)])}, 
   ~~> expand_bubble ([("Bubble", 8900)]) 
and([(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]) 

--

and([(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]);int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]) 

--

(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
and([__inDomain(sum([4,-(d);int(1..)]),int(1..3));int(1..)]), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(0 != __9#matrix_to_atom[d, sum([4,-(d);int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> index_matrix_to_atom ([("Base", 5000)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,(d - 1);int(1..)]),product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

product([1,(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> reorder_product ([("Base", 8800)]) 
product([(sum([4,-(d);int(1..)]) - 1);int(1..)]) 

--

product([(sum([4,-(d);int(1..)]) - 1);int(1..)]), 
   ~~> remove_unit_vector_products ([("Base", 8800)]) 
(sum([4,-(d);int(1..)]) - 1) 

--

(d - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([d,-(1);int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-(1);int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),(sum([4,-(d);int(1..)]) - 1),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

(sum([4,-(d);int(1..)]) - 1), 
   ~~> minus_to_sum ([("Base", 8400)]) 
sum([sum([4,-(d);int(1..)]),-(1);int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-(1);int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

sum([product([3,sum([d,-1;int(1..)]);int(1..)]),sum([sum([4,-(d);int(1..)]),-1;int(1..)]),1;int(1..)]), 
   ~~> normalise_associative_commutative ([("Base", 8900)]) 
sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)]) 

--

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),4,-(d),-1,1;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3)) 

--

Final model:

find d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __9: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

such that

(0 != [__9#matrix_to_atom_1_1,__9#matrix_to_atom_1_2,__9#matrix_to_atom_1_3,__9#matrix_to_atom_2_1,__9#matrix_to_atom_2_2,__9#matrix_to_atom_2_3,__9#matrix_to_atom_3_1,__9#matrix_to_atom_3_2,__9#matrix_to_atom_3_3;int(1..)][sum([product([3,sum([d,-1;int(1..)]);int(1..)]),-(d),4;int(1..)])]),
__inDomain(sum([4,-(d);int(1..)]),int(1..3))

Model before rewriting:

quantified d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __9: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

--

, 
   ~~> eval_root ([("Constant", 9001)]) 
true 

--

Final model:

quantified d: Index
find __0: matrix indexed by [[Index, Index]] of Value
find __1: matrix indexed by [[Index, Index]] of Value
find __2: matrix indexed by [[Index, Index]] of Value
find __3: matrix indexed by [[Index, Index]] of Value
find __4: matrix indexed by [[Index, Index]] of Value
find __5: matrix indexed by [[Index, Index]] of Value
find __6: matrix indexed by [[Index, Index]] of Value
find __7: matrix indexed by [[Index, Index]] of Value
find __8: matrix indexed by [[Index, Index]] of Value
find __9: matrix indexed by [[Index, Index]] of Value
find __0#matrix_to_atom_1_1: int(1..9)
find __0#matrix_to_atom_1_2: int(1..9)
find __0#matrix_to_atom_1_3: int(1..9)
find __0#matrix_to_atom_2_1: int(1..9)
find __0#matrix_to_atom_2_2: int(1..9)
find __0#matrix_to_atom_2_3: int(1..9)
find __0#matrix_to_atom_3_1: int(1..9)
find __0#matrix_to_atom_3_2: int(1..9)
find __0#matrix_to_atom_3_3: int(1..9)
find __1#matrix_to_atom_1_1: int(1..9)
find __1#matrix_to_atom_1_2: int(1..9)
find __1#matrix_to_atom_1_3: int(1..9)
find __1#matrix_to_atom_2_1: int(1..9)
find __1#matrix_to_atom_2_2: int(1..9)
find __1#matrix_to_atom_2_3: int(1..9)
find __1#matrix_to_atom_3_1: int(1..9)
find __1#matrix_to_atom_3_2: int(1..9)
find __1#matrix_to_atom_3_3: int(1..9)
find __2#matrix_to_atom_1_1: int(1..9)
find __2#matrix_to_atom_1_2: int(1..9)
find __2#matrix_to_atom_1_3: int(1..9)
find __2#matrix_to_atom_2_1: int(1..9)
find __2#matrix_to_atom_2_2: int(1..9)
find __2#matrix_to_atom_2_3: int(1..9)
find __2#matrix_to_atom_3_1: int(1..9)
find __2#matrix_to_atom_3_2: int(1..9)
find __2#matrix_to_atom_3_3: int(1..9)
find __3#matrix_to_atom_1_1: int(1..9)
find __3#matrix_to_atom_1_2: int(1..9)
find __3#matrix_to_atom_1_3: int(1..9)
find __3#matrix_to_atom_2_1: int(1..9)
find __3#matrix_to_atom_2_2: int(1..9)
find __3#matrix_to_atom_2_3: int(1..9)
find __3#matrix_to_atom_3_1: int(1..9)
find __3#matrix_to_atom_3_2: int(1..9)
find __3#matrix_to_atom_3_3: int(1..9)
find __4#matrix_to_atom_1_1: int(1..9)
find __4#matrix_to_atom_1_2: int(1..9)
find __4#matrix_to_atom_1_3: int(1..9)
find __4#matrix_to_atom_2_1: int(1..9)
find __4#matrix_to_atom_2_2: int(1..9)
find __4#matrix_to_atom_2_3: int(1..9)
find __4#matrix_to_atom_3_1: int(1..9)
find __4#matrix_to_atom_3_2: int(1..9)
find __4#matrix_to_atom_3_3: int(1..9)
find __5#matrix_to_atom_1_1: int(1..9)
find __5#matrix_to_atom_1_2: int(1..9)
find __5#matrix_to_atom_1_3: int(1..9)
find __5#matrix_to_atom_2_1: int(1..9)
find __5#matrix_to_atom_2_2: int(1..9)
find __5#matrix_to_atom_2_3: int(1..9)
find __5#matrix_to_atom_3_1: int(1..9)
find __5#matrix_to_atom_3_2: int(1..9)
find __5#matrix_to_atom_3_3: int(1..9)
find __6#matrix_to_atom_1_1: int(1..9)
find __6#matrix_to_atom_1_2: int(1..9)
find __6#matrix_to_atom_1_3: int(1..9)
find __6#matrix_to_atom_2_1: int(1..9)
find __6#matrix_to_atom_2_2: int(1..9)
find __6#matrix_to_atom_2_3: int(1..9)
find __6#matrix_to_atom_3_1: int(1..9)
find __6#matrix_to_atom_3_2: int(1..9)
find __6#matrix_to_atom_3_3: int(1..9)
find __7#matrix_to_atom_1_1: int(1..9)
find __7#matrix_to_atom_1_2: int(1..9)
find __7#matrix_to_atom_1_3: int(1..9)
find __7#matrix_to_atom_2_1: int(1..9)
find __7#matrix_to_atom_2_2: int(1..9)
find __7#matrix_to_atom_2_3: int(1..9)
find __7#matrix_to_atom_3_1: int(1..9)
find __7#matrix_to_atom_3_2: int(1..9)
find __7#matrix_to_atom_3_3: int(1..9)
find __8#matrix_to_atom_1_1: int(1..9)
find __8#matrix_to_atom_1_2: int(1..9)
find __8#matrix_to_atom_1_3: int(1..9)
find __8#matrix_to_atom_2_1: int(1..9)
find __8#matrix_to_atom_2_2: int(1..9)
find __8#matrix_to_atom_2_3: int(1..9)
find __8#matrix_to_atom_3_1: int(1..9)
find __8#matrix_to_atom_3_2: int(1..9)
find __8#matrix_to_atom_3_3: int(1..9)
find __9#matrix_to_atom_1_1: int(1..9)
find __9#matrix_to_atom_1_2: int(1..9)
find __9#matrix_to_atom_1_3: int(1..9)
find __9#matrix_to_atom_2_1: int(1..9)
find __9#matrix_to_atom_2_2: int(1..9)
find __9#matrix_to_atom_2_3: int(1..9)
find __9#matrix_to_atom_3_1: int(1..9)
find __9#matrix_to_atom_3_2: int(1..9)
find __9#matrix_to_atom_3_3: int(1..9)

such that

true

[ square[d, (4 - d)] | d : Index ], 
   ~~> expand_comprehension_via_solver ([("Base", 2000)]) 
[square[1, 3],square[2, 2],square[3, 1];int(1..)] 

--

square[1, 3], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([{square[1, 3] @ and([__inDomain(1,int(1..3)),__inDomain(3,int(1..3));int(1..)])},square[2, 2],square[3, 1];int(1..)]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],square[2, 2],square[3, 1];int(1..)]) = s) 

--

square[2, 2], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],{square[2, 2] @ and([__inDomain(2,int(1..3)),__inDomain(2,int(1..3));int(1..)])},square[3, 1];int(1..)]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],square[2, 2],square[3, 1];int(1..)]) = s) 

--

square[3, 1], 
   ~~> index_to_bubble ([("Bubble", 6000)]) 
{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])} 

--

allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],square[2, 2],{square[3, 1] @ and([__inDomain(3,int(1..3)),__inDomain(1,int(1..3));int(1..)])};int(1..)]) = s), 
   ~~> constant_evaluator ([("Constant", 9001)]) 
allDiff(flatten(square)),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],square[2, 2],square[3, 1];int(1..)]) = s) 

--

flatten(square), 
   ~~> unwrap_flatten_matrix_nonatomic ([("Smt", 999)]) 
[square[1, 1],square[1, 2],square[1, 3],square[2, 1],square[2, 2],square[2, 3],square[3, 1],square[3, 2],square[3, 3];int(1..9)] 

--

allDiff([square[1, 1],square[1, 2],square[1, 3],square[2, 1],square[2, 2],square[2, 3],square[3, 1],square[3, 2],square[3, 3];int(1..9)]), 
   ~~> matrix_to_list ([("Base", 2000)]) 
allDiff([square[1, 1],square[1, 2],square[1, 3],square[2, 1],square[2, 2],square[2, 3],square[3, 1],square[3, 2],square[3, 3];int(1..)]) 

--

Final model:

letting Index be domain int(1..3)
letting Value be domain int(1..9)
letting n be 3
find s: int(1..24)
find square: matrix indexed by [[Index, Index]] of Value

such that

allDiff([square[1, 1],square[1, 2],square[1, 3],square[2, 1],square[2, 2],square[2, 3],square[3, 1],square[3, 2],square[3, 3];int(1..)]),
(sum([square[1, 1],square[1, 2],square[1, 3];int(1..)]) = s),
(sum([square[2, 1],square[2, 2],square[2, 3];int(1..)]) = s),
(sum([square[3, 1],square[3, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 1],square[3, 1];int(1..)]) = s),
(sum([square[1, 2],square[2, 2],square[3, 2];int(1..)]) = s),
(sum([square[1, 3],square[2, 3],square[3, 3];int(1..)]) = s),
(sum([square[1, 1],square[2, 2],square[3, 3];int(1..)]) = s),
(sum([square[1, 3],square[2, 2],square[3, 1];int(1..)]) = s)

