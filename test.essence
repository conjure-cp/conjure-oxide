language ESSENCE' 1.0

letting dataset_ExplicitBoundedR6_Length be 4
letting dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy be
        [[1, 2, 3; int(1..3)], [1, 2, 4; int(1..3)], [1, 3, 4; int(1..3)], [2, 3, 4; int(1..3)]; int(1..4)]

letting dataset_ExplicitBoundedR6_Values_2 be [3, 2, 1, 3; int(1..4)]
letting fin1 be 4
letting fin2 be 3
letting fin3 be 1
letting fin4 be 3
letting fin5 be 1
letting fin6 be 3
letting n be 3 
letting nbObservations be 4
find omitList_ExplicitBounded_Length: int(nbObservations)
find omitList_ExplicitBounded_Values: matrix indexed by [int(1..nbObservations)] of int(0..1)
find rel1_RelationAsMatrix: matrix indexed by [int(1..n), int(1..n)] of int(0..1)
find survivor1_ExplicitBoundedR2_Length: int(nbObservations)
find survivor1_ExplicitBoundedR2_Values_Occurrence: matrix indexed by [int(1..nbObservations), int(1..n)] of int(0..1)
find rel2_RelationAsMatrix: matrix indexed by [int(1..n), int(1..n)] of int(0..1)
find survivor2_ExplicitBoundedR3_Length: int(nbObservations)
find survivor2_ExplicitBoundedR3_Values_Explicit: matrix indexed by [int(1..nbObservations), int(1)] of int(1..n)
find score: int(0..nbObservations)
such that
    and([(omitList_ExplicitBounded_Values[row]=1 /\
          !and([survivor1_ExplicitBoundedR2_Values_Occurrence[row, dataset_ExplicitBoundedR6_Values_2[row]]=1,
                row <= fin1, row <= nbObservations;
                    int(1..3)])
          /\ row <= nbObservations
          \/
          omitList_ExplicitBounded_Values[row]=0 /\ row <= nbObservations /\
          and([survivor1_ExplicitBoundedR2_Values_Occurrence[row, dataset_ExplicitBoundedR6_Values_2[row]]=1, row <= fin1,
               row <= nbObservations;
                   int(1..3)]))
         /\
         and([survivor1_ExplicitBoundedR2_Values_Occurrence
                  [row, dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy[row, q20]]=1
              /\ row <= nbObservations
              <->
              and([rel1_RelationAsMatrix
                        [dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy[row, q19],
                         dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy[row, q20]]=0
                       | q19 : int(1..fin2),
                         dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy[row, q19] != fin4 + 1,
                         row <= fin1])
                  | q20 : int(1..fin2),
                    dataset_ExplicitBoundedR6_Values_1_ExplicitVarSizeWithDummy[row, q20] != fin4 + 1, row <= fin1])
             | row : int(1..nbObservations)]),
    and([(omitList_ExplicitBounded_Values[row]=1 /\
          !and([survivor2_ExplicitBoundedR3_Values_Explicit[row, 1] = dataset_ExplicitBoundedR6_Values_2[row],
                row <= fin1, row <= nbObservations;
                    int(1..3)])
          /\ row <= nbObservations
          \/
          omitList_ExplicitBounded_Values[row]=0 /\ row <= nbObservations /\
          and([survivor2_ExplicitBoundedR3_Values_Explicit[row, 1] = dataset_ExplicitBoundedR6_Values_2[row],
               row <= fin1, row <= nbObservations;
                   int(1..3)]))
         /\
         and([survivor1_ExplicitBoundedR2_Values_Occurrence[row, q2]=1 ->
              (survivor2_ExplicitBoundedR3_Values_Explicit[row, 1] = q2 /\ row <= nbObservations <->
               and([survivor1_ExplicitBoundedR2_Values_Occurrence[row, y]=1 -> rel2_RelationAsMatrix[y, q2]=0
                        | y : int(1..n), row <= nbObservations]))
                  | q2 : int(1..n), row <= nbObservations])
             | row : int(1..nbObservations)]),
    score = sum([omitList_ExplicitBounded_Values[row] | row : int(1..nbObservations)]),
    1 <= sum([sum([rel1_RelationAsMatrix[q9, q10] | q10 : int(1..n)]) | q9 : int(1..n)]),
    and([rel1_RelationAsMatrix[q6, q6]=0 | q6 : int(1..n)]),
    and([rel1_RelationAsMatrix[q6, q7]=1 /\ rel1_RelationAsMatrix[q7, q8]=1 -> rel1_RelationAsMatrix[q6, q8]=1
             | q6 : int(1..n), q7 : int(1..n), q8 : int(1..n)]),
    1 <= sum([sum([rel2_RelationAsMatrix[q17, q18] | q18 : int(1..n)]) | q17 : int(1..n)]),
    and([rel2_RelationAsMatrix[q14, q14]=0 | q14 : int(1..n)]),
    and([rel2_RelationAsMatrix[q14, q15]=1 /\ rel2_RelationAsMatrix[q15, q16]=1 -> rel2_RelationAsMatrix[q14, q16]=1
             | q14 : int(1..n), q15 : int(1..n), q16 : int(1..n)])
