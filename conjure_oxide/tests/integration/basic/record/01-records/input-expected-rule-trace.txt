
Model before rewriting:

letting R be domain record of ([a: bool, b: int(0..9)])
find x: R
find y: R
find z: R

such that

(x[a] = true),
(x[b] = 3),
(y = {a: false,b: 4}),
(y = z)

--

Successful Tranformation: 
x, 
~~> select_representation [8000; Base]
x#record_to_atom
new variables:
  find x#record_to_atom_1: bool
  find x#record_to_atom_2: int(0..9)

--

Successful Tranformation: 
x#record_to_atom[a], 
~~> record_index_to_bubble [8000; Bubble]
{x#record_to_atom[1] @ and([(1 <= 2),(1 >= 1);int(1..)])}


--

Successful Tranformation: 
and([(1 <= 2),(1 >= 1);int(1..)]), 
~~> constant_evaluator [9001; Constant]
true


--

Successful Tranformation: 
({x#record_to_atom[1] @ true} = true), 
~~> bubble_up [8900; Bubble]
{(x#record_to_atom[1] = true) @ and([true;int(1..)])}


--

Successful Tranformation: 
and([true;int(1..)]), 
~~> constant_evaluator [9001; Constant]
true


--

Successful Tranformation: 
{(x#record_to_atom[1] = true) @ true}, 
~~> expand_bubble [8900; Bubble]
and([(x#record_to_atom[1] = true),true;int(1..)])


--

Successful Tranformation: 
and([(x#record_to_atom[1] = true),true;int(1..)]),
(x[b] = 3),
(y = {a: false,b: 4}),
(y = z), 
~~> partial_evaluator [9000; Base]
(x#record_to_atom[1] = true),
true,
(x[b] = 3),
(y = {a: false,b: 4}),
(y = z)


--

Successful Tranformation: 
(x#record_to_atom[1] = true),
true,
(x[b] = 3),
(y = {a: false,b: 4}),
(y = z), 
~~> partial_evaluator [9000; Base]
(x#record_to_atom[1] = true),
(x[b] = 3),
(y = {a: false,b: 4}),
(y = z)


--

Successful Tranformation: 
x, 
~~> select_representation [8000; Base]
x#record_to_atom


--

Successful Tranformation: 
x#record_to_atom[b], 
~~> record_index_to_bubble [8000; Bubble]
{x#record_to_atom[2] @ and([(2 <= 2),(2 >= 1);int(1..)])}


--

Successful Tranformation: 
and([(2 <= 2),(2 >= 1);int(1..)]), 
~~> constant_evaluator [9001; Constant]
true


--

Successful Tranformation: 
({x#record_to_atom[2] @ true} = 3), 
~~> bubble_up [8900; Bubble]
{(x#record_to_atom[2] = 3) @ and([true;int(1..)])}


--

Successful Tranformation: 
and([true;int(1..)]), 
~~> constant_evaluator [9001; Constant]
true


--

Successful Tranformation: 
{(x#record_to_atom[2] = 3) @ true}, 
~~> expand_bubble [8900; Bubble]
and([(x#record_to_atom[2] = 3),true;int(1..)])


--

Successful Tranformation: 
(x#record_to_atom[1] = true),
and([(x#record_to_atom[2] = 3),true;int(1..)]),
(y = {a: false,b: 4}),
(y = z), 
~~> partial_evaluator [9000; Base]
(x#record_to_atom[1] = true),
(x#record_to_atom[2] = 3),
true,
(y = {a: false,b: 4}),
(y = z)


--

Successful Tranformation: 
(x#record_to_atom[1] = true),
(x#record_to_atom[2] = 3),
true,
(y = {a: false,b: 4}),
(y = z), 
~~> partial_evaluator [9000; Base]
(x#record_to_atom[1] = true),
(x#record_to_atom[2] = 3),
(y = {a: false,b: 4}),
(y = z)


--

Successful Tranformation: 
y, 
~~> select_representation [8000; Base]
y#record_to_atom
new variables:
  find y#record_to_atom_1: bool
  find y#record_to_atom_2: int(0..9)

--

Successful Tranformation: 
y, 
~~> select_representation [8000; Base]
y#record_to_atom


--

Successful Tranformation: 
z, 
~~> select_representation [8000; Base]
z#record_to_atom
new variables:
  find z#record_to_atom_1: bool
  find z#record_to_atom_2: int(0..9)

--

Successful Tranformation: 
(x#record_to_atom[1] = true),
(x#record_to_atom[2] = 3),
(y#record_to_atom = {a: false,b: 4}),
(y#record_to_atom = z#record_to_atom), 
~~> substitute_domain_lettings [5000; Base]
(x#record_to_atom[1] = true),
(x#record_to_atom[2] = 3),
(y#record_to_atom = {a: false,b: 4}),
(y#record_to_atom = z#record_to_atom)


--

Successful Tranformation: 
x#record_to_atom[1], 
~~> index_record_to_atom [2000; Base]
x#record_to_atom_1


--

Successful Tranformation: 
(x#record_to_atom_1 = true), 
~~> bool_eq_to_reify [4400; Minion]
Reify(true, x#record_to_atom_1)


--

Successful Tranformation: 
x#record_to_atom[2], 
~~> index_record_to_atom [2000; Base]
x#record_to_atom_2


--

Successful Tranformation: 
(y#record_to_atom = {a: false,b: 4}), 
~~> record_to_const [2000; Base]
and([(y#record_to_atom[1] = {a: false,b: 4}[1]),(y#record_to_atom[2] = {a: false,b: 4}[2]);int(1..)])


--

Successful Tranformation: 
{a: false,b: 4}[1], 
~~> constant_evaluator [9001; Constant]
false


--

Successful Tranformation: 
{a: false,b: 4}[2], 
~~> constant_evaluator [9001; Constant]
4


--

Successful Tranformation: 
Reify(true, x#record_to_atom_1),
(x#record_to_atom_2 = 3),
and([(y#record_to_atom[1] = false),(y#record_to_atom[2] = 4);int(1..)]),
(y#record_to_atom = z#record_to_atom), 
~~> partial_evaluator [9000; Base]
Reify(true, x#record_to_atom_1),
(x#record_to_atom_2 = 3),
(y#record_to_atom[1] = false),
(y#record_to_atom[2] = 4),
(y#record_to_atom = z#record_to_atom)


--

Successful Tranformation: 
y#record_to_atom[1], 
~~> index_record_to_atom [2000; Base]
y#record_to_atom_1


--

Successful Tranformation: 
(y#record_to_atom_1 = false), 
~~> bool_eq_to_reify [4400; Minion]
Reify(false, y#record_to_atom_1)


--

Successful Tranformation: 
y#record_to_atom[2], 
~~> index_record_to_atom [2000; Base]
y#record_to_atom_2


--

Successful Tranformation: 
(y#record_to_atom = z#record_to_atom), 
~~> record_equality [2000; Base]
and([(y#record_to_atom[1] = z#record_to_atom[1]),(y#record_to_atom[2] = z#record_to_atom[2]);int(1..)])


--

Successful Tranformation: 
Reify(true, x#record_to_atom_1),
(x#record_to_atom_2 = 3),
Reify(false, y#record_to_atom_1),
(y#record_to_atom_2 = 4),
and([(y#record_to_atom[1] = z#record_to_atom[1]),(y#record_to_atom[2] = z#record_to_atom[2]);int(1..)]), 
~~> partial_evaluator [9000; Base]
Reify(true, x#record_to_atom_1),
(x#record_to_atom_2 = 3),
Reify(false, y#record_to_atom_1),
(y#record_to_atom_2 = 4),
(y#record_to_atom[1] = z#record_to_atom[1]),
(y#record_to_atom[2] = z#record_to_atom[2])


--

Successful Tranformation: 
y#record_to_atom[1], 
~~> index_record_to_atom [2000; Base]
y#record_to_atom_1


--

Successful Tranformation: 
z#record_to_atom[1], 
~~> index_record_to_atom [2000; Base]
z#record_to_atom_1


--

Successful Tranformation: 
y#record_to_atom[2], 
~~> index_record_to_atom [2000; Base]
y#record_to_atom_2


--

Successful Tranformation: 
z#record_to_atom[2], 
~~> index_record_to_atom [2000; Base]
z#record_to_atom_2


--


Final model:

letting R be domain record of ([a: bool, b: int(0..9)])
find x: record of ([a: bool, b: int(0..9)])
find y: record of ([a: bool, b: int(0..9)])
find z: record of ([a: bool, b: int(0..9)])
find x#record_to_atom_1: bool
find x#record_to_atom_2: int(0..9)
find y#record_to_atom_1: bool
find y#record_to_atom_2: int(0..9)
find z#record_to_atom_1: bool
find z#record_to_atom_2: int(0..9)

such that

Reify(true, x#record_to_atom_1),
(x#record_to_atom_2 = 3),
Reify(false, y#record_to_atom_1),
(y#record_to_atom_2 = 4),
(y#record_to_atom_1 = z#record_to_atom_1),
(y#record_to_atom_2 = z#record_to_atom_2)

