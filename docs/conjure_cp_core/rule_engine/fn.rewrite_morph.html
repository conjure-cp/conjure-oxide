<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Rewrites a `Model` by applying rule sets using an optimized, tree-morphing rewriter."><title>rewrite_morph in conjure_cp_core::rule_engine - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-b7b9f40b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="conjure_cp_core" data-themes="" data-resource-suffix="" data-rustdoc-version="1.95.0-nightly (f60a0f1bc 2026-02-02)" data-channel="nightly" data-search-js="search-fb33671b.js" data-stringdex-js="stringdex-b897f86f.js" data-settings-js="settings-170eb4bf.js" ><script src="../../static.files/storage-f9617a14.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-12f88f4f.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-f7c3ffd8.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><a class="skip-main-content" href="#main-content">Skip to main content</a><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">rewrite_morph</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../conjure_cp_core/index.html">conjure_<wbr>cp_<wbr>core</a><span class="version">0.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">rewrite_<wbr>morph</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#parameters" title="Parameters">Parameters</a></li><li><a href="#returns" title="Returns">Returns</a></li><li><a href="#panics" title="Panics">Panics</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In conjure_<wbr>cp_<wbr>core::<wbr>rule_<wbr>engine</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content" tabindex="-1"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">conjure_cp_core</a>::<wbr><a href="index.html">rule_engine</a></div><h1>Function <span class="fn">rewrite_<wbr>morph</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/conjure_cp_core/rule_engine/rewrite_morph.rs.html#32-58">Source</a> </span></div><pre class="rust item-decl"><code>pub fn rewrite_morph&lt;'a&gt;(
    model: <a class="struct" href="../ast/struct.Model.html" title="struct conjure_cp_core::ast::Model">Model</a>,
    rule_sets: &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&amp;'a <a class="struct" href="struct.RuleSet.html" title="struct conjure_cp_core::rule_engine::RuleSet">RuleSet</a>&lt;'a&gt;&gt;,
    prop_multiple_equally_applicable: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>,
) -&gt; <a class="struct" href="../ast/struct.Model.html" title="struct conjure_cp_core::ast::Model">Model</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Rewrites a <code>Model</code> by applying rule sets using an optimized, tree-morphing rewriter.</p>
<p>This function traverses the expression tree of the model and applies the given rules
to transform it. It operates on the model’s internal structure, replacing the root
expression and updating the symbol table based on the transformations performed by the
<code>morph</code> function.</p>
<h2 id="parameters"><a class="doc-anchor" href="#parameters">§</a>Parameters</h2>
<ul>
<li><code>model</code>: The <code>Model</code> to be rewritten. It is consumed and a new, transformed version is returned.</li>
<li><code>rule_sets</code>: A vector of <code>RuleSet</code> references containing the rules for transformation. These rules are grouped by priority before being applied.</li>
<li><code>prop_multiple_equally_applicable</code>: A boolean flag to control behavior when multiple rules of the same priority can be applied to the same expression.
<ul>
<li>If <code>true</code>, the rewriter will use a selection strategy (<code>select_panic</code>) that panics.</li>
<li>If <code>false</code>, the rewriter will use a selection strategy (<code>select_first</code>) that simply picks the first applicable rule it encounters.</li>
</ul>
</li>
</ul>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<p>The rewritten <code>Model</code> after all applicable rules have been applied.</p>
<h2 id="panics"><a class="doc-anchor" href="#panics">§</a>Panics</h2>
<p>This function will panic under two conditions:</p>
<ul>
<li>If the internal grouping of rules by priority fails (from <code>get_rules_grouped</code>).</li>
<li>If <code>prop_multiple_equally_applicable</code> is set to <code>true</code> and more than one rule of the same priority can be applied to the same expression.</li>
</ul>
</div></details></section></div></main></body></html>